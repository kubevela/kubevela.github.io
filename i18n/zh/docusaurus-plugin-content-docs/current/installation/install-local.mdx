---
title: 在本地安装 KubeVela
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

本文档将向你展示如何在本地机器中以 all-in-one 模式安装 KubeVela。

## 1. 准备环境

支持在这些操作系统中安装 KubeVela：Linux, macOS, Windows。

**要求**

1. 确保你的机器上安装了 `curl`。
2. 如果你在使用 macOS or Windows, 请先安装 [Docker Desktop](https://www.docker.com/products/docker-desktop)。

## 2. 安装 VelaD 和 KubeVela

[VelaD](https://github.com/kubevela/velad) 将 KubeVela 最小安装以及使用 VelaUX 的一切依赖打包为一个可执行文件。你可以使用 VelaD 在安装有 Docker 的 macOS/Windows 中或 Linux 中安装 KubeVela。

- VelaD 集成了 [K3s](https://rancher.com/docs/k3s/latest/en/quick-start/)  和 [k3d](https://k3d.io/) 来提供了 Kubernetes 集群。无需担心集群的创建和配置。
- VelaD 打包了镜像等依赖，可以在没有网络的环境中最小化安装 KubeVela 以及其 VelaUX 插件。

### 下载 VelaD

下面等脚本将下载二进制文件并将其放置在您的系统“PATH”中，
因此在安装过程中您可能需要 root 权限。
如果您不需要root权限和自动化，您可以从[发布页面]（https://github.com/kubevela/velad/releases）下载并手动解压缩。


<Tabs className="unique-tabs">
  <TabItem value="Linux">

  ```shell
  curl -fsSl https://static.kubevela.net/script/install-velad.sh | bash
  ```

  检查 `velad` 安装到 `/usr/local/bin/`

  </TabItem>
  <TabItem value="Windows">

  在 powershell 中执行如下命令:

  ```shell
  powershell -Command "iwr -useb https://static.kubevela.net/script/install-velad.ps1 | iex"
  ```
  检查 `velad` 安装到 `C:\vela\`

  </TabItem>
</Tabs>

### 安装 KubeVela

```shell
velad install
```

<details>
  <summary>期望输出</summary>

  ```
  Preparing K3s images...
  Successfully prepare k3s image: /Users/sunjianbo/.vela/velad/k3s/k3s-airgap-images-amd64.tgz
  Successfully prepare k3d images

  ...snip...

  KubeVela control plane has been successfully set up on your cluster.
  If you want to enable dashboard, please run "vela addon enable /Users/sunjianbo/.vela/addons/velaux"

  Keep the token below if you want to restart the control plane
  K1075e7f6c77555e6ebdaf4854e4a2f39ae4287cfad23f27cdac5b33608d44633fe::server:zSpzbdbGzVxOwfBvvjgT

  🚀 Successfully install KubeVela control plane
  🔭 See available commands with `vela help`
  ```

</details>

### 验证安装结果

设置 kubeconfig 并列出所有内置的组件定义:

```shell
export KUBECONFIG=$(velad kubeconfig --host)
vela comp
```

:::tip
- 执行 `velad install` 时，已经安装了 vela CLI (`vela`) 并自动添加到 `PATH`。 所以你可以直接使用它。
- 用于配置对集群的访问的文件称为 *kubeconfig 文件*
:::

<details>
  <summary>期望输出</summary>

  ```
  NAME DEFINITION DESCRIPTION
  daemon daemonsets.apps Describes daemonset services in Kubernetes.
  webservice deployments.apps Describes long-running, scalable, containerized services
  that have a stable network endpoint to receive external
  network traffic from customers.
  worker deployments.apps Describes long-running, scalable, containerized services
  that running at backend. They do NOT have network endpoint
  to receive external network traffic.
  config-image-registry autodetects.core.oam.dev Config information to authenticate image registry
  k8s-objects autodetects.core.oam.dev K8s-objects allow users to specify raw K8s objects in
  properties
  task jobs.batch Describes jobs that run code or a script to completion.
  ref-objects autodetects.core.oam.dev Ref-objects allow users to specify ref objects to use.
  Notice that this component type have special handle logic.
  raw autodetects.core.oam.dev Raw allow users to specify raw K8s object in properties.
  This definition is DEPRECATED, please use 'k8s-objects'
  instead.
  cron-task cronjobs.batch Describes cron jobs that run code or a script to completion.
  ```

</details>

## 3. 安装 VelaUX

VelaUX 是 KubeVela 的仪表板。 它是在您的集群中运行的 Web 应用程序。 您可以使用浏览器访问它。
如果您不使用 KubeVela 的 UI 控制台，这是可选的。

```shell script
vela addon enable ~/.vela/addons/velaux
```

<details>
  <summary>期望输出</summary>

  ```
  Addon: velaux enabled Successfully.
  ```
</details>

默认情况下，velaux 没有任何暴露的端口，您可以通过以下方式查看：

```shell
vela port-forward addon-velaux -n vela-system 8080:80
```

选择 `> local | velaux | velaux` 来访问 VelaUX

> 如需更多 VelaUX 选项，请参阅 [VelaUX 插件](../reference/addons/velaux) 文档了解其他高级安装参数。

VelaUX 需要身份验证。 默认用户名是 `admin`，密码是 **`VelaUX12345`**。

首次登录时需要使用新密码覆盖，请务必记住新密码。

## 4. 清理

此命令将清理 KubeVela 控制器以及 Kubernetes 集群，有关更详细的步骤，请参阅 [高级指南](../platform-engineers/advanced-install#uninstall)。

```
velad uninstall
```
