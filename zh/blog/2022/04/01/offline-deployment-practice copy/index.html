<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="KubeVela Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GLR1Y52M7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5GLR1Y52M7",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="KubeVela" href="/zh/opensearch.xml"><title data-react-helmet="true">China Merchants Bank&#x27;s Practice on Offline Installation with KubeVela | KubeVela</title><meta data-react-helmet="true" property="og:title" content="China Merchants Bank&#x27;s Practice on Offline Installation with KubeVela | KubeVela"><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/zh/blog/2022/04/01/offline-deployment-practice copy"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="https://raw.githubusercontent.com/oam-dev/KubeVela.io/main/docs/resources/KubeVela-03.png"><meta data-react-helmet="true" name="twitter:image" content="https://raw.githubusercontent.com/oam-dev/KubeVela.io/main/docs/resources/KubeVela-03.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/zh/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/zh/blog/2022/04/01/offline-deployment-practice copy"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/blog/2022/04/01/offline-deployment-practice copy" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/blog/2022/04/01/offline-deployment-practice copy" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/blog/2022/04/01/offline-deployment-practice copy" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh/assets/css/styles.1f84ae86.css">
<link rel="preload" href="/zh/assets/js/runtime~main.312f92b6.js" as="script">
<link rel="preload" href="/zh/assets/js/main.aa5d7873.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a class="navbar__item navbar__link" href="/zh/docs/">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/zh/docs/">v1.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/">Next</a></li><li><a class="dropdown__link" href="/zh/docs/">v1.3</a></li><li><a class="dropdown__link" href="/zh/docs/v1.2/">v1.2</a></li><li><a class="dropdown__link" href="/zh/docs/v1.1/">v1.1</a></li><li><a class="dropdown__link" href="/zh/docs/v1.0/">v1.0</a></li></ul></div><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">å›½å†…åŠ é€Ÿ</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/blog/2022/04/01/offline-deployment-practice copy" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh/blog/2022/04/01/offline-deployment-practice copy" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/zh/docs/next/">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/">v1.3</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v1.2/">v1.2</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v1.1/">v1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v1.0/">v1.0</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/">æ–‡æ¡£</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/zh/blog">åšå®¢</a></li><li class="menu__list-item"><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="menu__link">å›½å†…åŠ é€Ÿ</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/blog/2022/04/01/offline-deployment-practice copy" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/blog/2022/04/01/offline-deployment-practice copy" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_2ahu thin-scrollbar"><h3 class="sidebarItemTitle_2hhb">Recent posts</h3><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/2022/04/06/multi-cluster-management">KubeVela v1.3 å¤šé›†ç¾¤åˆä½“éªŒï¼Œè½»æ¾ç®¡ç†åº”ç”¨åˆ†å‘å’Œå·®å¼‚åŒ–é…ç½®</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/zh/blog/2022/04/01/offline-deployment-practice copy">China Merchants Bank&#x27;s Practice on Offline Installation with KubeVela</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/2022/03/02/kubevela-with-machine-learning">åŸºäº KubeVela çš„æœºå™¨å­¦ä¹ å®è·µ</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/2022/03/01/kubevela-generate-top-50-popular-resources-of-aws-using-100-lines-of-code">å¦‚ä½•ç”¨ 100 è¡Œä»£ç å¿«é€Ÿå¼•å…¥ AWS æœ€å—æ¬¢è¿çš„ 50 ç§äº‘èµ„æº</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/2022/01/27/blog-1.2">KubeVela v1.2 å‘å¸ƒï¼šèšç„¦å¼€å‘è€…ä½“éªŒï¼Œè½»æ¾å‘å¸ƒä½ çš„å¤šé›†ç¾¤åº”ç”¨</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="margin-bottom--sm blogPostTitle_GeHD">China Merchants Bank&#x27;s Practice on Offline Installation with KubeVela</h1><div class="margin-vert--md"><time datetime="2022-04-01T00:00:00.000Z" class="blogPostDate_fNvV">2022å¹´4æœˆ1æ—¥ Â· é˜…è¯»éœ€è¦ 1 åˆ†é’Ÿ</time></div><div class="avatar margin-vert--md"><a href="http://www.cmbchina.com/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="/img/china-merchants-bank.jpg" alt="Xiangbo Ma"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="http://www.cmbchina.com/" target="_blank" rel="noopener noreferrer">Xiangbo Ma</a></h4><small class="avatar__subtitle">(Cloud platform development team)</small></div></div></header><div class="markdown"><p>The cloud platform development team of China Merchants Bank has been trying out KubeVela since 2021 internally and aims to using it for enhancing our primary application delivery and management capabilities. Due to the specific security concern for financial insurance industry, network control measurements are relatively strict, and our intranet cannot directly pull Docker Hub image, and there is no Helm image source available as well. Therefore, in order to landing KubeVela in the intranet, you must perform a complete offline installation.</p><p>This article will take the KubeVela V1.2.5 version as an example, introduce the offline installation practice to help other users easier to complete KubeVela&#x27;s deployment in offline environment.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevela-offline-installation-solution"></a>KubeVela Offline Installation Solution<a class="hash-link" href="#kubevela-offline-installation-solution" title="Direct link to heading">#</a></h2><p>We divide the offline installation of KubeVela in three parts, which are Vela CLI, Vela Core, and Addon offline installation. Each part mainly involves the loading of the relevant Docker image and Helm&#x27;s package, which can greatly speed up deployment process in offline environment.</p><p>Before doing so, please ensure that Kubernetes cluster version is  <code>&gt;= v1.19 &amp;&amp; &lt; v1.22</code>. One way of KubeVela as a control plane relies on Kubernetes, which can be placed in any product or in any cloud provider. At the same time, you can also use Kind or Minikube to deploy KubeVela locally.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="vela-cli-offline-installation"></a>Vela CLI Offline Installation<a class="hash-link" href="#vela-cli-offline-installation" title="Direct link to heading">#</a></h3><ul><li>First, you need to download of the binary version of <code>vela</code> that you want by checking KubeVela <a href="https://github.com/oam-dev/kubevela/releases" target="_blank" rel="noopener noreferrer">Release Log</a></li><li>Unzip binary files and configure the appropriate environment variables in <code>$PATH</code><ul><li>Unzip binary file<ul><li><code>tar -zxvf vela-v1.2.5-linux-amd64.tar.gz</code></li><li><code>mv ./linux-amd64/vela /usr/local/bin/vela</code></li></ul></li><li>Set environment variables<ul><li><code>vi /etc/profile</code></li><li><code>export PATH=&quot;$PATH:/usr/local/bin&quot;</code></li><li><code>source /etc/profile</code></li></ul></li><li>Verify the installation of Vela CLI through <code>vela version</code></li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">CLI VERSION: V1.2.5</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Core Version:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">GitRevision: git-ef80b66</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">GOLANGVERSION: Go1.17.7</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>At this point, Vela CLI has been deployed offline!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="vela-core-offline-installation"></a>Vela Core Offline Installation<a class="hash-link" href="#vela-core-offline-installation" title="Direct link to heading">#</a></h3><ul><li>Before deploying Vela Core offline, first you need to install <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm</a> in an offline environment and its version needs to meet <code>v3.2.0+</code></li><li>Prepare Docker image. Vela Core&#x27;s deployment mainly involves 5 images, you need to first visit the Docker Hub in extranet to download the corresponding images, then load them to offline environment<ul><li>Pull the image from Docker Hub<ul><li><code>docker pull oamdev/vela-core:v1.2.5</code></li><li><code>docker pull oamdev/cluster-gateway:v1.1.7</code></li><li><code>docker pull oamdev/kube-webhook-certgen:v2.3</code></li><li><code>docker pull oamdev/alpine-k8s:1.18.2</code></li><li><code>docker pull oamdev/hello-world:v1</code></li></ul></li><li>Save image to local disks<ul><li><code>docker save -o vela-core.tar oamdev/vela-core:v1.2.5</code></li><li><code>docker save -o cluster-gateway.tar oamdev/cluster-gateway:v1.1.7</code></li><li><code>docker save -o kube-webhook-certgen.tar oamdev/kube-webhook-certgen:v2.3</code></li><li><code>docker save -o alpine-k8s.tar oamdev/alpine-k8s:1.18.2</code></li><li><code>docker save -o hello-world.tar oamdev/hello-world:v1</code></li></ul></li><li>Re-load the image in the offline environment<ul><li><code>docker load vela-core.tar</code></li><li><code>docker load cluster-gateway.tar</code></li><li><code>docker load kube-webhook-certgen.tar</code></li><li><code>docker load alpine-k8s.tar</code></li><li><code>docker load hello-world.tar</code></li></ul></li></ul></li><li>Download <a href="https://github.com/oam-dev/KubeVela/releases" target="_blank" rel="noopener noreferrer">KubeVela Core</a>, copy it to offline environment and use Helm to repackage<ul><li>Repackage the KubeVela source code and install the chart package to the control cluster offline<ul><li><code>helm package kubevela/charts/vela-core --destination kubevela/charts</code></li><li><code>helm install --create-namespace -n vela-system kubevela kubevela/charts/vela-core-0.1.0.tgz --wait</code></li></ul></li><li>Check the output</li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">KubeVela Control Plane Has Been successfully </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> up on your cluster.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>At this point, Vela Core has been deployed offline!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="addon-offline-installation"></a>Addon Offline Installation<a class="hash-link" href="#addon-offline-installation" title="Direct link to heading">#</a></h3><ul><li>First download <a href="https://github.com/oam-dev/catalog" target="_blank" rel="noopener noreferrer">Catalog Source</a> and copy it to offline environment</li><li>Here, we will take VelaUX, one of many more addons, as an example. First prepare its Docker image, VelaUX mainly involve 2 images, you need to first access the extranet to download the corresponding image from Docker Hub, then load it to offline environment<ul><li>Pull the image from Docker Hub<ul><li><code>docker pull oamdev/vela-apiserver:v1.2.5</code></li><li><code>docker pull oamdev/velaux:v1.2.5</code></li></ul></li><li>Save image to local disks<ul><li><code>docker save -o vela-apiserver.tar oamdev/vela-apiserver:v1.2.5</code></li><li><code>docker save -o velaux.tar oamdev/velaux:v1.2.5</code></li></ul></li><li>Re-load the image in the offline environment<ul><li><code>docker load vela-apiserver.tar</code></li><li><code>docker load velaux.tar</code></li></ul></li></ul></li><li>Install VelaUX<ul><li>Install VelaUX via Vela CLI<ul><li><code>vela addon enable catalog-master/addons/velaux</code></li></ul></li><li>Check the output</li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">  Addon: velaux enabled Successfully.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>If there is a cluster installed route Controller or Nginx Ingress Controller and also linked with an available domain, you can deploy external routing to make VelaUX accessible. Here present Openshift Route as an example, you can also choose Ingress if you wish</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> route.openshift.io/v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Route</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> velaux</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">route</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> vela</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> velaux.xxx.xxx.cn</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> velaux</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">weight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">wildcardPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> None</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Check the installation</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -I -m </span><span class="token number">10</span><span class="token plain"> -o /dev/null -s -w %</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">http_code</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> http://velaux.xxx.xxx.cn/applications</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>At this point, VelaUX has been deployed offline! At the same time, for other types of Addon&#x27;s offline deployment, access to the corresponding directory of the <a href="https://github.com/oam-dev/catalog" target="_blank" rel="noopener noreferrer">Catalog Source</a> and repeat the above moves, you would complete all the addons&#x27; offline deployments for good.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="summarize"></a>Summarize<a class="hash-link" href="#summarize" title="Direct link to heading">#</a></h2><p>During offline deployment, we also try to save Vela Core and Addon&#x27;s resource that generated to be YAML files after deploying in extranet and re-deploy them in an offline environment, but because of all different kinds of resource involved in and it requires many other authorization issues to resolve, this way is more than cumbersome.</p><p>With this practice of KubeVela&#x27;s offline deployment, we hope it help you build a complete set of KubeVela in offline environment much faster. Offline installation is pretty much a pain point for most developers, we also see that the KubeVela community is introducing the brand new <a href="https://github.com/oam-dev/velad" target="_blank" rel="noopener noreferrer">velad</a>, a fully offline, highly accountable installation tool. Velad can help automate completion by making many steps as one, such as preparing clusters, downloading and packing image, installing and etc. Further more, it do support many features: In Linux machine (such as Alibaba Cloud ECS) we can locally spin up a cluster to install Vela-Core; while starting a KubeVela control plane, do not have to worry about its data to be lost when machine behind it accidentally was shutdown; Velad can stores all the data from control plane cluster into a traditional database (such as MySQL deployed on another ECS).</p><p>In the recent version to come, China Merchants Bank will increase the efforts in the open source community of KubeVela, actively building: enterprise-level capacity, enhancement on multi-cluster, offline deployment and application-level observability. We&#x27;ll also be contributing the financial industry&#x27;s user scenarios and business needs, driving cloud-native ecology achieve more easily and efficient application management experience, and at last but not at least, welcome you the community member to join us together in this journey.</p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/zh/blog/tags/kube-vela">KubeVela</a></div></footer></article><div><a href="https://github.com/oam-dev/kubevela.io/tree/main/blog/2022-04-01-offline-deployment-practice copy.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æœ¬é¡µ</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/blog/2022/04/06/multi-cluster-management"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« KubeVela v1.3 å¤šé›†ç¾¤åˆä½“éªŒï¼Œè½»æ¾ç®¡ç†åº”ç”¨åˆ†å‘å’Œå·®å¼‚åŒ–é…ç½®</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/blog/2022/03/02/kubevela-with-machine-learning"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">åŸºäº KubeVela çš„æœºå™¨å­¦ä¹ å®è·µ Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kubevela-offline-installation-solution" class="table-of-contents__link">KubeVela Offline Installation Solution</a><ul><li><a href="#vela-cli-offline-installation" class="table-of-contents__link">Vela CLI Offline Installation</a></li><li><a href="#vela-core-offline-installation" class="table-of-contents__link">Vela Core Offline Installation</a></li><li><a href="#addon-offline-installation" class="table-of-contents__link">Addon Offline Installation</a></li></ul></li><li><a href="#summarize" class="table-of-contents__link">Summarize</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">æ–‡æ¡£</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/end-user/quick-start-cli">å¿«é€Ÿå¼€å§‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/tutorials/webservice">å®è·µæ•™ç¨‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/platform-engineers/oam/oam-model">è‡ªå®šä¹‰æ‰©å±•</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog/2022/04/01/">é’‰é’‰ (23310022)</a></li><li class="footer__item"><div class="wechat"> <a class="wechat-label">Wechat Group(Scan code to request joining)</a> <a class="wechat-img" rel="noreferrer noopener" aria-label="Wechat Group"><img src="https://static.kubevela.net/images/barnett-wechat.jpg" alt="Broker wechat to add you into the user group."></a></div></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog">åšå®¢</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2021 | Documentation Distributed under <a herf="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
      </div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.312f92b6.js"></script>
<script src="/zh/assets/js/main.aa5d7873.js"></script>
</body>
</html>