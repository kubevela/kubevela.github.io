<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="KubeVela Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GLR1Y52M7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5GLR1Y52M7",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="KubeVela" href="/zh/opensearch.xml"><title data-react-helmet="true">æ¨¡å—å®šä¹‰ï¼ˆX-Definitionï¼‰ | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/zh/docs/v1.1/platform-engineers/oam/x-definition"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:version" content="v1.1"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v1.1"><meta data-react-helmet="true" property="og:title" content="æ¨¡å—å®šä¹‰ï¼ˆX-Definitionï¼‰ | KubeVela"><meta data-react-helmet="true" name="description" content="KubeVela æ˜¯å®Œå…¨å¯ç¼–ç¨‹çš„ï¼Œå®ƒå¯ä»¥è½»æ¾çš„æ ¹æ®ä½ çš„éœ€æ±‚å®ç°åŸåœ°å®šåˆ¶å’Œæ‰©å±•ã€‚"><meta data-react-helmet="true" property="og:description" content="KubeVela æ˜¯å®Œå…¨å¯ç¼–ç¨‹çš„ï¼Œå®ƒå¯ä»¥è½»æ¾çš„æ ¹æ®ä½ çš„éœ€æ±‚å®ç°åŸåœ°å®šåˆ¶å’Œæ‰©å±•ã€‚"><link data-react-helmet="true" rel="shortcut icon" href="/zh/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/zh/docs/v1.1/platform-engineers/oam/x-definition"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/v1.1/platform-engineers/oam/x-definition" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/docs/v1.1/platform-engineers/oam/x-definition" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/v1.1/platform-engineers/oam/x-definition" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh/assets/css/styles.1f84ae86.css">
<link rel="preload" href="/zh/assets/js/runtime~main.312f92b6.js" as="script">
<link rel="preload" href="/zh/assets/js/main.aa5d7873.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/zh/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/v1.1/">v1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/platform-engineers/oam/x-definition">Next</a></li><li><a class="dropdown__link" href="/zh/docs/platform-engineers/oam/x-definition">v1.3</a></li><li><a class="dropdown__link" href="/zh/docs/v1.2/platform-engineers/oam/x-definition">v1.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/v1.1/platform-engineers/oam/x-definition">v1.1</a></li><li><a class="dropdown__link" href="/zh/docs/v1.0/">v1.0</a></li></ul></div><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">å›½å†…åŠ é€Ÿ</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/docs/v1.1/platform-engineers/oam/x-definition" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/v1.1/platform-engineers/oam/x-definition" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/zh/docs/next/platform-engineers/oam/x-definition">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/platform-engineers/oam/x-definition">v1.3</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v1.2/platform-engineers/oam/x-definition">v1.2</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/zh/docs/v1.1/platform-engineers/oam/x-definition">v1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v1.0/">v1.0</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/zh/docs/">æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/blog">åšå®¢</a></li><li class="menu__list-item"><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="menu__link">å›½å†…åŠ é€Ÿ</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/v1.1/platform-engineers/oam/x-definition" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/docs/v1.1/platform-engineers/oam/x-definition" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">å¿«é€Ÿå¼€å§‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/">KubeVela ç®€ä»‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/install">å¿«é€Ÿå®‰è£…</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/quick-start">äº¤ä»˜ç¬¬ä¸€ä¸ªåº”ç”¨</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">æ ¸å¿ƒæ¦‚å¿µ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/core-concepts/architecture">ç³»ç»Ÿæ¶æ„</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/core-concepts/application">åº”ç”¨äº¤ä»˜æ¨¡å‹</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">æœ€ä½³å®è·µ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/case-studies/jenkins-cicd">Jenkins CI/CD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/case-studies/gitops">åŸºäº KubeVela çš„ GitOps äº¤ä»˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/case-studies/initialize-env">åˆå§‹åŒ–ç¯å¢ƒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/case-studies/canary-blue-green">åŸºäº Istio çš„æ¸è¿›å¼å‘å¸ƒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/case-studies/multi-cluster">å¤šé›†ç¾¤åº”ç”¨äº¤ä»˜</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ç”¨æˆ·æ‰‹å†Œ</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">é€‰æ‹©å¾…äº¤ä»˜ç»„ä»¶</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/helm">Helm ç»„ä»¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/kustomize">Kustomize ç»„ä»¶</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">äº‘æœåŠ¡ç»„ä»¶</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Terraform</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/terraform/alibaba-ack">é˜¿é‡Œäº‘ ACK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/terraform/alibaba-eip">é˜¿é‡Œäº‘ EIP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/terraform/alibaba-rds">é˜¿é‡Œäº‘ RDS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/terraform/alibaba-oss">é˜¿é‡Œäº‘ OSS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/terraform/azure-database-mariadb">Azure Mariadb æ•°æ®åº“</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/terraform/aws-s3">AWS S3</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cloud-services/provider-and-consume-cloud-services">é›†æˆäº‘èµ„æº</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">CUE ç»„ä»¶</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cue/webservice">Web æœåŠ¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cue/worker">åç«¯æœåŠ¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cue/task">ä¸€æ¬¡æ€§ä»»åŠ¡</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/cue/raw">èµ„æºæ¨¡æ¿</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/components/more">è·å–æ›´å¤š</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ç»‘å®šè¿ç»´ç‰¹å¾</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/ingress">é…ç½®ç½‘å…³</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/rollout">ç°åº¦å‘å¸ƒå’Œæ‰©ç¼©å®¹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/autoscaler">è‡ªåŠ¨æ‰©ç¼©å®¹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/annotations-and-labels">æ ‡ç­¾ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/service-binding">æ•°æ®ç»‘å®š</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/sidecar">å®¹å™¨æ³¨å…¥</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/kustomize-patch">Kustomize è¡¥ä¸</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/traits/more">è·å–æ›´å¤š</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">è®¾å®šåº”ç”¨ç­–ç•¥</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/policies/envbinding">å¤šç¯å¢ƒéƒ¨ç½²</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/policies/health">å¥åº·çŠ¶æ€æ£€æŸ¥</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">è®¾è®¡äº¤ä»˜å·¥ä½œæµ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/workflow/built-in-workflow-defs">å·¥ä½œæµæ­¥éª¤</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/workflow/webhook-notification">ä½¿ç”¨ Webhook å‘é€é€šçŸ¥</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/workflow/component-dependency-parameter">åº”ç”¨ç»„ä»¶é—´çš„ä¾èµ–å’Œå‚æ•°ä¼ é€’</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/end-user/version-control">ç‰ˆæœ¬ç®¡ç†</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">ç®¡ç†å‘˜æ‰‹å†Œ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">å¼€æ”¾åº”ç”¨æ¨¡å‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/platform-engineers/oam/oam-model">æ¨¡å‹ç®€ä»‹</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/zh/docs/v1.1/platform-engineers/oam/x-definition">æ¨¡å—å®šä¹‰ï¼ˆX-Definitionï¼‰</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">CUE è¯­è¨€</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/cue/basic">åŸºç¡€å…¥é—¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/cue/definition-edit">ç¼–è¾‘ç®¡ç†æ¨¡å—å®šä¹‰</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/cue/advanced">äº¤ä»˜å®Œæ•´æ¨¡å—</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">ç»„ä»¶ç³»ç»Ÿ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/components/custom-component">è‡ªå®šä¹‰ç»„ä»¶å…¥é—¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/components/component-terraform">Terraform ç»„ä»¶</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">è¿ç»´ç‰¹å¾ç³»ç»Ÿ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/traits/customize-trait">è‡ªå®šä¹‰è¿ç»´ç‰¹å¾</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/traits/patch-trait">è¡¥ä¸å‹ç‰¹å¾</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/traits/status">çŠ¶æ€å›å†™</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/traits/advanced">æ›´å¤šç”¨æ³•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">å·¥ä½œæµç³»ç»Ÿ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/workflow/workflow">è‡ªå®šä¹‰å·¥ä½œæµ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/workflow/cue-actions">é™„å½•ï¼šCUE æ“ä½œç¬¦</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">ç³»ç»Ÿè¿ç»´</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/system-operation/bootstrap-parameters">å¯åŠ¨å‚æ•°è¯´æ˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/system-operation/managing-clusters">é›†ç¾¤ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/system-operation/observability">å¯è§‚æµ‹æ€§</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/system-operation/performance-finetuning">æ€§èƒ½è°ƒä¼˜</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">è°ƒè¯•æŒ‡å—</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/platform-engineers/debug/dry-run">æœ¬åœ°è¯•è¿è¡Œ</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/v1.1/platform-engineers/advanced-install">è‡ªå®šä¹‰å®‰è£…</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">å‚è€ƒ</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">CLI å‘½ä»¤è¡Œå·¥å…·</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_components">vela components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_config">vela config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_env">vela env</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_init">vela init</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_up">vela up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_version">vela version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_exec">vela exec</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_logs">vela logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_ls">vela ls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_port-forward">vela port-forward</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_show">vela show</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_status">vela status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_workloads">vela workloads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_traits">vela traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_system">vela system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_template">vela template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/cli/vela_cap">vela cap</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/v1.1/roadmap/README">KubeVela Roadmap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v1.1/developers/references/devex/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for KubeVela <strong>v1.1</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For latest stable documentation, see the <strong><a href="/zh/docs/platform-engineers/oam/x-definition">æœ€è¿‘ç¨³å®šç‰ˆæœ¬</a></strong> (v1.3).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: v1.1</span></div><header><h1 class="docTitle_3a4h">æ¨¡å—å®šä¹‰ï¼ˆX-Definitionï¼‰</h1></header><div class="markdown"><p>KubeVela æ˜¯å®Œå…¨å¯ç¼–ç¨‹çš„ï¼Œå®ƒå¯ä»¥è½»æ¾çš„æ ¹æ®ä½ çš„éœ€æ±‚å®ç°åŸåœ°å®šåˆ¶å’Œæ‰©å±•ã€‚</p><p>æœ€ç»ˆç”¨æˆ·ä½¿ç”¨çš„ OAM æ¨¡å‹ <a href="/zh/docs/v1.1/platform-engineers/oam/oam-model">åº”ç”¨éƒ¨ç½²è®¡åˆ’ Application</a> ä¸­ï¼Œæœ‰å¾ˆå¤šå£°æ˜â€œç±»å‹çš„å­—æ®µâ€ï¼Œå¦‚ç»„ä»¶ç±»å‹ã€è¿ç»´ç‰¹å¾ç±»å‹ã€åº”ç”¨ç­–ç•¥ç±»å‹ã€å·¥ä½œæµèŠ‚ç‚¹ç±»å‹ç­‰ï¼Œè¿™äº›ç±»å‹å®é™…ä¸Šå°±æ˜¯ OAM æ¨¡å‹çš„æ¨¡å—å®šä¹‰ï¼ˆX-Definitionï¼‰ï¼Œè¿™äº›æ¨¡å—åœ¨ KubeVela ä¸­å…¨éƒ¨éƒ½æ˜¯åŸºäº <a href="https://cuelang.org" target="_blank" rel="noopener noreferrer">CUE</a> çš„å¯ç¼–ç¨‹æ¨¡å—ã€‚</p><p>å½“å‰ OAM æ¨¡å‹æ”¯æŒçš„æ¨¡å—å®šä¹‰ï¼ˆX-Definitionï¼‰åŒ…æ‹¬ç»„ä»¶å®šä¹‰ï¼ˆComponentDefinitionï¼‰ï¼Œè¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆTraitDefinitionï¼‰ã€åº”ç”¨ç­–ç•¥å®šä¹‰ï¼ˆPolicyDefinitionï¼‰ï¼Œå·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ï¼ˆWorkflowStepDefinitionï¼‰ç­‰ï¼Œéšç€ç³»ç»Ÿæ¼”è¿›ï¼ŒOAM æ¨¡å‹æœªæ¥å¯èƒ½ä¼šæ ¹æ®åœºæ™¯éœ€è¦è¿›ä¸€æ­¥å¢åŠ æ–°çš„æ¨¡å—å®šä¹‰ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç»„ä»¶å®šä¹‰ï¼ˆcomponentdefinitionï¼‰"></a>ç»„ä»¶å®šä¹‰ï¼ˆComponentDefinitionï¼‰<a class="hash-link" href="#ç»„ä»¶å®šä¹‰ï¼ˆcomponentdefinitionï¼‰" title="Direct link to heading">#</a></h2><p>ç»„ä»¶å®šä¹‰ï¼ˆComponentDefinitionï¼‰çš„è®¾è®¡ç›®æ ‡æ˜¯å…è®¸å¹³å°ç®¡ç†å‘˜å°†ä»»ä½•ç±»å‹çš„å¯éƒ¨ç½²åˆ¶å“å°è£…æˆå¾…äº¤ä»˜çš„â€œç»„ä»¶â€ã€‚åªè¦å®šä¹‰å¥½ä¹‹åï¼Œè¿™ç§ç±»å‹çš„ç»„ä»¶å°±å¯ä»¥è¢«ç”¨æˆ·åœ¨éƒ¨ç½²è®¡åˆ’ï¼ˆApplicationï¼‰ä¸­å¼•ç”¨ã€å®ä¾‹åŒ–å¹¶äº¤ä»˜å‡ºå»ã€‚</p><blockquote><p>æ‰€ä»¥ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„è”æƒ³åˆ°ï¼Œæˆ‘ä»¬åœ¨ Application çš„ <code>components[*].type</code> ä¸­æŒ‡å®šçš„ç±»å‹åç§°ï¼Œå°±æ˜¯å°±æ˜¯å¹³å°ä¸­çš„ç»„ä»¶å®šä¹‰ã€‚æ— è®ºæ˜¯ KubeVela å†…ç½®çš„è¿˜æ˜¯å¹³å°ç®¡ç†å‘˜æ‰©å±•çš„ï¼Œéƒ½æ˜¯å¹³ç­‰çš„å¯¹è±¡ã€‚</p></blockquote><p>å¸¸è§çš„ç»„ä»¶ç±»å‹åŒ…æ‹¬ Helm Chart ã€Kustomize ç›®å½•ã€ä¸€ç»„ Kubernetes YAMLæ–‡ä»¶ã€å®¹å™¨é•œåƒã€äº‘èµ„æº IaC æ–‡ä»¶ã€æˆ–è€… CUE é…ç½®æ–‡ä»¶æ¨¡å—ç­‰ç­‰ã€‚ç»„ä»¶ä¾›åº”æ–¹å¯¹åº”çœŸå®ä¸–ç•Œä¸­çš„è§’è‰²ï¼Œä¸€èˆ¬å°±æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶çš„åˆ†å‘è€…ï¼ˆISVï¼‰ã€DevOps å›¢é˜Ÿçš„å·¥ç¨‹å¸ˆã€æˆ–è€…ä½ è‡ªå·±å»ºè®¾çš„ CI ä½“ç³»ç”Ÿæˆçš„ä»£ç åŒ…å’Œé•œåƒã€‚</p><p>ç»„ä»¶å®šä¹‰æ˜¯å¯ä»¥è¢«å…±äº«å’Œå¤ç”¨çš„ã€‚æ¯”å¦‚ä¸€ä¸ª<code>é˜¿é‡Œäº‘ RDS</code>ç»„ä»¶ç±»å‹ï¼Œæœ€ç»ˆç”¨æˆ·å¯ä»¥åœ¨ä¸åŒçš„åº”ç”¨ä¸­é€‰æ‹©åŒæ ·çš„ <code>é˜¿é‡Œäº‘ RDS</code> ç»„ä»¶ç±»å‹ï¼Œå®ä¾‹åŒ–æˆä¸åŒè§„æ ¼ã€ä¸åŒå‚æ•°é…ç½®çš„äº‘æ•°æ®åº“å®ä¾‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç»„ä»¶å®šä¹‰æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ"></a>ç»„ä»¶å®šä¹‰æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ<a class="hash-link" href="#ç»„ä»¶å®šä¹‰æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ" title="Direct link to heading">#</a></h3><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç»„ä»¶å®šä¹‰çš„æ¡†æ¶æ ¼å¼ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ComponentDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;ç»„ä»¶å®šä¹‰åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;åŠŸèƒ½æè¿°è¯´æ˜</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># å·¥ä½œè´Ÿè½½æè¿°</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;Kubernetes å·¥ä½œè´Ÿè½½çš„èµ„æºç»„</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;Kubernetes å·¥ä½œè´Ÿè½½ç±»å‹</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ç»„ä»¶æè¿°</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># é€šè¿‡ CUE è¯­è¨€å®šä¹‰çš„ç»„ä»¶è¯¦æƒ…</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;CUE æ ¼å¼æ¨¡æ¿</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>é™¤äº†åŸºæœ¬çš„â€œç»„ä»¶å®šä¹‰åç§°â€å’Œâ€œåŠŸèƒ½æè¿°è¯´æ˜â€ä»¥å¤–ï¼Œç»„ä»¶å®šä¹‰çš„æ ¸å¿ƒæ˜¯ <code>.spec</code> ä¸‹é¢çš„ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å·¥ä½œè´Ÿè½½ç±»å‹ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯ç»„ä»¶æè¿°ã€‚</p><ul><li>å·¥ä½œè´Ÿè½½ç±»å‹ï¼ˆå¯¹åº”<code>.spec.workload</code>ï¼‰å­—æ®µä¸ºç³»ç»ŸæŒ‡æ˜äº†ä¸€ä¸ªç»„ä»¶èƒŒåå¯¹åº”çš„å·¥ä½œè´Ÿè½½ç±»å‹ã€‚å®ƒæœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼Œä¸€ç§å¦‚ä¾‹å­ä¸­æ˜¾ç¤ºçš„ï¼Œå¡«å†™ <code>.spec.workload.definition</code> çš„å…·ä½“èµ„æºç»„å’Œèµ„æºç±»å‹åç§°ã€‚å¦ä¸€ç§æ–¹æ³•åˆ™æ˜¯å¡«å†™ä¸€ä¸ªå·¥ä½œè´Ÿè½½ç±»å‹çš„åç§°ã€‚å¯¹äºèƒŒåçš„å·¥ä½œè´Ÿè½½ç±»å‹ä¸æ˜ç¡®çš„ç»„ä»¶å®šä¹‰ï¼Œå¯ä»¥å¡«å†™ä¸€ä¸ªç‰¹æ®Šçš„å·¥ä½œè´Ÿè½½ç±»å‹ <code>autodetects.core.oam.dev</code>ï¼Œè¡¨ç¤ºè®© KubeVela è‡ªåŠ¨å‘ç°èƒŒåçš„å·¥ä½œè´Ÿè½½ã€‚</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ComponentDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># å·¥ä½œè´Ÿè½½ç±»å‹</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;å·¥ä½œè´Ÿè½½ç±»å‹åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">    </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å·¥ä½œè´Ÿè½½ç±»å‹åç§°å¯¹åº”äº†ä¸€ä¸ªâ€œå·¥ä½œè´Ÿè½½å®šä¹‰â€çš„å¼•ç”¨ï¼Œâ€œå·¥ä½œè´Ÿè½½å®šä¹‰â€çš„åŸç†ä¼šåœ¨ä¸‹ä¸€ä¸ªå°èŠ‚ä»‹ç»ã€‚ä¸¤ç§å†™æ³•çš„åŒºåˆ«åœ¨äºç¬¬ä¸€ç§ç›´æ¥å†™å·¥ä½œè´Ÿè½½çš„èµ„æºç»„å’Œç±»å‹ï¼Œå¦‚æœèƒŒåæ²¡æœ‰å·¥ä½œè´Ÿè½½å®šä¹‰ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€‚è€ŒæŒ‡å®šâ€œå·¥ä½œè´Ÿè½½ç±»å‹åç§°â€åˆ™å¯ä»¥åšæ ¡éªŒï¼Œé™åˆ¶ç»„ä»¶å®šä¹‰åªèƒ½é’ˆå¯¹ç³»ç»Ÿä¸­å·²ç»å­˜åœ¨çš„å·¥ä½œè´Ÿè½½ç±»å‹åšæŠ½è±¡ã€‚</p><ul><li>ç»„ä»¶æè¿°ï¼ˆå¯¹åº”<code>.spec.schematic</code>ï¼‰å®šä¹‰äº†ç»„ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚è¯¥éƒ¨åˆ†ç›®å‰æ”¯æŒ <a href="/zh/docs/v1.1/platform-engineers/cue/basic"><code>cue</code></a> å’Œ <a href="/zh/docs/v1.1/platform-engineers/kube/component"><code>kube</code></a> ä¸¤ç§æè¿°æ–¹å¼ã€‚</li></ul><p>å…·ä½“æŠ½è±¡æ–¹å¼å’Œäº¤ä»˜æ–¹å¼çš„ç¼–å†™å¯ä»¥æŸ¥é˜…å¯¹åº”çš„æ–‡æ¡£ï¼Œè¿™é‡Œä»¥ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ä»‹ç»ç»„ä»¶å®šä¹‰çš„å·¥ä½œæµç¨‹ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ComponentDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> helm</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> vela</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;helm release is a group of K8s resources from either git repository or helm repo&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> autodetects.core.oam.dev</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            apiVersion: &quot;source.toolkit.fluxcd.io/v1beta1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            metadata: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                name: context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            if parameter.repoType == &quot;git&quot; {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                kind: &quot;GitRepository&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    url: parameter.repoUrl</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    ref:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        branch: parameter.branch</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    interval: parameter.pullInterval</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            if parameter.repoType == &quot;helm&quot; {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                kind: &quot;HelmRepository&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    interval: parameter.pullInterval</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    url:      parameter.repoUrl</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    if parameter.secretRef != _|_ {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        secretRef: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            name: parameter.secretRef</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">outputs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;helm.toolkit.fluxcd.io/v2beta1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">       </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;HelmRelease&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">interval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.pullInterval</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">chart</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">chart</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">   parameter.chart</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.version</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">sourceRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            if parameter.repoType == &quot;git&quot; </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;GitRepository&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            if parameter.repoType == &quot;helm&quot; </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;HelmRepository&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">      context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> context.namespace</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">interval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.pullInterval</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                if parameter.targetNamespace </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">targetNamespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.targetNamespace</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                if parameter.values </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.values</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">repoType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;git&quot; </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> &quot;helm&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=The Git or Helm repository URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> accept HTTP/S or SSH address as git url.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">repoUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=The interval at which to check for repository and relese updates.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">pullInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">*&quot;5m&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=1.The relative path to helm chart for git source. 2. chart name for helm resource</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">chart</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Chart version</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">version?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=The Git reference to checkout and monitor for changes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> defaults to master branch.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">*&quot;master&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=The name of the secret containing authentication credentials for the Helm repository.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">secretRef?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=The namespace for helm chart</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">targetNamespace?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Chart version</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">value?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#nestedmap</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">#nestedmap: {</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œè¿™ä¸ªç»„ä»¶å®šä¹‰çš„åå­—å« <code>helm</code>ï¼Œä¸€ç»æ³¨å†Œï¼Œæœ€ç»ˆç”¨æˆ·åœ¨ Application çš„ç»„ä»¶ç±»å‹ï¼ˆ<code>components[*].type</code>ï¼‰å­—æ®µå°±å¯ä»¥å¡«å†™è¿™ä¸ªç±»å‹ã€‚</p><ul><li>å…¶ä¸­ <code>definition.oam.dev/description</code> å¯¹åº”çš„å­—æ®µå°±æè¿°äº†è¿™ä¸ªç»„ä»¶ç±»å‹çš„åŠŸèƒ½æ˜¯å¯åŠ¨ä¸€ä¸ª helm chartã€‚</li><li><code>.spec.workload</code> å­—æ®µï¼Œå¡«å†™çš„æ˜¯<code>autodetects.core.oam.dev</code>è¡¨ç¤ºè®©ç”¨æˆ·è‡ªåŠ¨å‘ç°è¿™ä¸ª helm chart ç»„ä»¶èƒŒåçš„å·¥ä½œè´Ÿè½½ã€‚</li><li><code>.spec.schematic.cue.template</code>å­—æ®µæè¿°äº†åŸºäº CUE çš„æŠ½è±¡æ¨¡æ¿ï¼Œè¾“å‡ºåŒ…å«2ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ä¸€ä¸ªè¾“å‡ºæ˜¯æ ¹æ® helm repo æ‰˜ç®¡çš„åˆ¶å“å½¢æ€å†³å®šçš„ï¼Œå¦‚æœæ˜¯ç”¨çš„helmå®˜æ–¹çš„æ¨¡å¼æ‰˜ç®¡çš„åˆ™æ˜¯ç”Ÿæˆ <code>HelmRepository</code> å¯¹è±¡ï¼Œgitæ¨¡å¼æ¨å¹¿çš„å°±æ˜¯ç”Ÿæˆ<code>GitRepository</code> å¯¹è±¡ï¼Œå¦ä¸€ä¸ªè¾“å‡ºçš„å¯¹è±¡æ˜¯ <code>HelmRelease</code> åŒ…å«äº†è¿™ä¸ª helm çš„å…·ä½“å‚æ•°ã€‚ å…¶ä¸­ <code>parameter</code> åˆ—è¡¨åˆ™æ˜¯æš´éœ²ç»™ç”¨æˆ·å¡«å†™çš„å…¨éƒ¨å‚æ•°ã€‚</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆtraitdefinitionï¼‰"></a>è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆTraitDefinitionï¼‰<a class="hash-link" href="#è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆtraitdefinitionï¼‰" title="Direct link to heading">#</a></h2><p>è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆTraitDefinitionï¼‰ä¸ºç»„ä»¶æä¾›äº†ä¸€ç³»åˆ—å¯è¢«æŒ‰éœ€ç»‘å®šçš„è¿ç»´åŠ¨ä½œï¼Œè¿™äº›è¿ç»´åŠ¨ä½œé€šå¸¸éƒ½æ˜¯ç”±å¹³å°ç®¡ç†å‘˜æä¾›çš„è¿ç»´èƒ½åŠ›ï¼Œå®ƒä»¬ä¸ºè¿™ä¸ªç»„ä»¶æä¾›ä¸€ç³»åˆ—çš„è¿ç»´æ“ä½œå’Œç­–ç•¥ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªè´Ÿè½½å‡è¡¡ç­–ç•¥ã€è·¯ç”±ç­–ç•¥ã€æˆ–è€…æ‰§è¡Œå¼¹æ€§æ‰©ç¼©å®¹ã€ç°åº¦å‘å¸ƒç­–ç•¥ç­‰ç­‰ã€‚</p><p>ç»‘å®šä¸€ä¸ªè¿ç»´ç‰¹å¾å®é™…ä¸Šå°±æ˜¯åœ¨ Application çš„ <code>components[*].traits</code> æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ <code>.triats[*].type</code> æŒ‡å®šçš„ç±»å‹åç§°ï¼Œå°±æ˜¯å¹³å°ä¸­çš„è¿ç»´ç‰¹å¾å®šä¹‰ï¼Œè€Œ <code>.triats[*].properties</code> å°±æ˜¯ä¸€ç³»åˆ—è¿ç»´ç‰¹å¾çš„å‚æ•°å­—æ®µã€‚ä¸ç»„ä»¶å®šä¹‰ç±»ä¼¼ï¼Œè¿™é‡Œçš„è¿ç»´ç‰¹å¾å¯ä»¥æ˜¯ KubeVela å†…ç½®çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¹³å°ç®¡ç†å‘˜åç»­æ‰©å±•çš„ï¼Œéƒ½æ˜¯å¹³ç­‰çš„å¯¹è±¡ã€‚åŒæ ·çš„ï¼Œè¿ç»´ç‰¹å¾å®šä¹‰ä¸­ä¹Ÿå…è®¸é€šè¿‡ä¸åŒçš„æŠ½è±¡æ–¹å¼å®šä¹‰æ¨¡æ¿æŒ‡å®šè¿ç»´åŠŸèƒ½ã€‚</p><p>è¿ç»´ç‰¹å¾å®šä¹‰çš„æ ¼å¼å’Œå­—æ®µä½œç”¨å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TraitDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿ç»´ç‰¹å¾å®šä¹‰åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;åŠŸèƒ½æè¿°è¯´æ˜</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definition</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿ç»´èƒ½åŠ›å¯¹åº”çš„ Kubernetes èµ„æºç»„</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿ç»´èƒ½åŠ›å¯¹åº”çš„ Kubernetes èµ„æºç±»å‹</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workloadRefPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿ç»´èƒ½åŠ›ä¸­å¯¹äºå·¥ä½œè´Ÿè½½å¯¹è±¡çš„å¼•ç”¨å­—æ®µè·¯å¾„</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">podDisruptive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿ç»´èƒ½åŠ›çš„å‚æ•°æ›´æ–°ä¼šä¸ä¼šå¼•èµ·åº•å±‚èµ„æºï¼ˆpodï¼‰é‡å¯</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">manageWorkload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;æ˜¯å¦ç”±è¯¥è¿ç»´ç‰¹å¾ç®¡ç†å·¥ä½œè´Ÿè½½</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">skipRevisionAffect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¯¥è¿ç»´ç‰¹å¾æ˜¯å¦ä¸è®¡å…¥ç‰ˆæœ¬å˜åŒ–çš„è®¡ç®—</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">appliesToWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;è¿ç»´ç‰¹å¾èƒ½å¤Ÿé€‚é…çš„å·¥ä½œè´Ÿè½½åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conflictsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;ä¸è¯¥è¿ç»´ç‰¹å¾å†²çªçš„å…¶ä»–è¿ç»´ç‰¹å¾åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">revisionEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿ç»´èƒ½åŠ›æ˜¯å¦æ„ŸçŸ¥ç»„ä»¶ç‰ˆæœ¬çš„å˜åŒ–</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># æŠ½è±¡æ–¹å¼</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># å­˜åœ¨å¤šç§æŠ½è±¡æ–¹å¼</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;CUE æ ¼å¼æ¨¡æ¿</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä»ä¸Šè¿°è¿ç»´ç‰¹å¾çš„æ ¼å¼å’ŒåŠŸèƒ½ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿ç»´ç‰¹å¾å®šä¹‰æä¾›äº†ä¸€ç³»åˆ—è¿ç»´èƒ½åŠ›å’Œç»„ä»¶ä¹‹é—´è¡”æ¥çš„æ–¹å¼ï¼Œä½¿å¾—ç›¸åŒåŠŸèƒ½çš„è¿ç»´åŠŸèƒ½å¯ä»¥é€‚é…åˆ°ä¸åŒçš„ç»„ä»¶ä¸­ã€‚å…·ä½“çš„å­—æ®µåŠŸèƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>è¿ç»´ç‰¹å¾èƒ½å¤Ÿé€‚é…çš„å·¥ä½œè´Ÿè½½åç§°åˆ—è¡¨ï¼ˆ<code>.spec.appliesToWorkloads</code>ï¼‰,å¯ç¼ºçœå­—æ®µï¼Œå­—ç¬¦ä¸²æ•°ç»„ç±»å‹ï¼Œç”³æ˜è¿™ä¸ªè¿ç»´ç‰¹å¾å¯ä»¥ç”¨äºçš„å·¥ä½œè´Ÿè½½ç±»å‹ï¼Œå¡«å†™çš„æ˜¯å·¥ä½œè´Ÿè½½çš„ CRD åç§°ï¼Œæ ¼å¼ä¸º <code>&lt;resources&gt;.&lt;api-group&gt;</code></li><li>ä¸è¯¥è¿ç»´ç‰¹å¾å†²çªçš„å…¶ä»–è¿ç»´ç‰¹å¾åç§°åˆ—è¡¨ï¼ˆ<code>.spec.conflictsWith</code>ï¼‰,å¯ç¼ºçœå­—æ®µï¼Œå­—ç¬¦ä¸²æ•°ç»„ç±»å‹ï¼Œç”³æ˜è¿™ä¸ªè¿ç»´ç‰¹å¾ä¸å“ªäº›è¿ç»´ç‰¹å¾å†²çªï¼Œå¡«å†™çš„æ˜¯è¿ç»´ç‰¹å¾åç§°çš„åˆ—è¡¨ã€‚</li><li>ç‰¹å¾æè¿°ï¼ˆå¯¹åº”<code>.spec.schematic</code>ï¼‰å­—æ®µå®šä¹‰äº†å…·ä½“çš„è¿ç»´åŠ¨ä½œã€‚ç›®å‰ä¸»è¦é€šè¿‡ <a href="/zh/docs/v1.1/platform-engineers/traits/customize-trait"><code>CUE</code></a> æ¥å®ç°ï¼ŒåŒæ—¶ä¹ŸåŒ…å«ä¸€ç³»åˆ—è¯¸å¦‚<a href="/zh/docs/v1.1/platform-engineers/traits/advanced"><code>patch-trait</code></a>è¿™æ ·çš„é«˜çº§ç”¨æ³•ã€‚</li><li>è¿ç»´ç‰¹å¾å¯¹åº”çš„ Kubernetes èµ„æºå®šä¹‰ï¼ˆ<code>.spec.definition</code>å­—æ®µï¼‰ï¼Œå¯ç¼ºçœå­—æ®µï¼Œå¦‚æœè¿ç»´èƒ½åŠ›é€šè¿‡ Kubernetes çš„ CRD æ–¹å¼æä¾›å¯ä»¥å¡«å†™ï¼Œå…¶ä¸­ <code>apiVersion</code> å’Œ <code>kind</code> åˆ†åˆ«æè¿°äº†èƒŒåå¯¹åº”çš„ Kubernetes èµ„æºç»„å’Œèµ„æºç±»å‹ã€‚</li><li>è¿ç»´èƒ½åŠ›ä¸­å¯¹äºå·¥ä½œè´Ÿè½½å¯¹è±¡çš„å¼•ç”¨å­—æ®µè·¯å¾„ï¼ˆ<code>.spec.workloadRefPath</code>å­—æ®µï¼‰ï¼Œå¯ç¼ºçœå­—æ®µï¼Œè¿ç»´èƒ½åŠ›ä¸­å¦‚æœæ¶‰åŠåˆ°å·¥ä½œè´Ÿè½½çš„å¼•ç”¨ï¼Œå¯ä»¥å¡«å†™è¿™æ ·ä¸€ä¸ªè·¯å¾„åœ°å€ï¼ˆå¦‚æ“ä½œå¼¹æ€§æ‰©ç¼©å®¹çš„ <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/" target="_blank" rel="noopener noreferrer">HPA</a>å¯¹è±¡ï¼Œå°±å¯ä»¥å¡«å†™<code>spec.scaleTargetRef</code>ï¼‰ï¼Œç„¶å KubeVela ä¼šè‡ªåŠ¨å°†å·¥ä½œè´Ÿè½½çš„å®ä¾‹åŒ–å¼•ç”¨æ³¨å…¥åˆ°è¿ç»´èƒ½åŠ›çš„å®ä¾‹å¯¹è±¡ä¸­ã€‚</li><li>è¿ç»´èƒ½åŠ›çš„å‚æ•°æ›´æ–°ä¼šä¸ä¼šå¼•èµ·åº•å±‚èµ„æºï¼ˆpodï¼‰é‡å¯ï¼ˆ<code>.spec.podDisruptive</code>å­—æ®µï¼‰ï¼Œå¯ç¼ºçœå­—æ®µï¼Œbool ç±»å‹ï¼Œä¸»è¦ç”¨äºå‘ç”¨æˆ·æ ‡è¯† trait çš„æ›´æ–°ä¼šä¸ä¼šå¯¼è‡´åº•å±‚èµ„æºï¼ˆpodï¼‰çš„é‡å¯ã€‚è¿™ä¸ªæ ‡è¯†é€šå¸¸å¯ä»¥æé†’ç”¨æˆ·ï¼Œæ”¹åŠ¨è¿™æ ·ä¸€ä¸ªtraitå¯èƒ½åº”è¯¥å†ç»“åˆä¸€ä¸ªç°åº¦å‘å¸ƒï¼Œä»¥å…å¤§é‡èµ„æºé‡å¯å¼•å…¥æœåŠ¡ä¸å¯ç”¨å’Œå…¶ä»–é£é™©ã€‚</li><li>æ˜¯å¦ç”±è¯¥è¿ç»´ç‰¹å¾ç®¡ç†å·¥ä½œè´Ÿè½½ï¼ˆ<code>.spec.manageWorkload</code>ï¼‰,å¯ç¼ºçœå­—æ®µï¼Œbool ç±»å‹ï¼Œè®¾ç½®ä¸º true åˆ™æ ‡è¯†è¿™ä¸ªè¿ç»´ç‰¹å¾ä¼šè´Ÿè´£å·¥ä½œè´Ÿè½½çš„åˆ›å»ºã€æ›´æ–°ã€ä»¥åŠèµ„æºå›æ”¶ï¼Œé€šå¸¸æ˜¯ç°åº¦å‘å¸ƒçš„è¿ç»´ç‰¹å¾ä¼šå…·å¤‡è¿™ä¸ªèƒ½åŠ›ã€‚</li><li>è¯¥è¿ç»´ç‰¹å¾æ˜¯å¦ä¸è®¡å…¥ç‰ˆæœ¬å˜åŒ–çš„è®¡ç®—ï¼ˆ<code>.spec.skipRevisionAffect</code>ï¼‰,å¯ç¼ºçœå­—æ®µï¼Œbool ç±»å‹ï¼Œè®¾ç½®ä¸º true åˆ™æ ‡è¯†è¿™ä¸ªè¿ç»´ç‰¹å¾çš„ä¿®æ”¹ä¸è®¡å…¥ç‰ˆæœ¬çš„å˜åŒ–ï¼Œå³ç”¨æˆ·åœ¨åº”ç”¨ä¸­çº¯ç²¹ä¿®æ”¹è¿™ä¸ªè¿ç»´ç‰¹å¾çš„å­—æ®µä¸ä¼šè§¦å‘åº”ç”¨æœ¬èº«çš„ç‰ˆæœ¬å˜åŒ–ã€‚</li><li>è¿ç»´èƒ½åŠ›æ˜¯å¦æ„ŸçŸ¥ç»„ä»¶ç‰ˆæœ¬çš„å˜åŒ–ï¼ˆ<code>.spec.revisionEnabled</code>ï¼‰å­—æ®µï¼Œå¯ç¼ºçœå­—æ®µï¼Œbool ç±»å‹ï¼Œè®¾ç½®ä¸º true è¡¨ç¤ºç»„ä»¶ä¼šç”Ÿæˆçš„èµ„æºåç¼€ä¼šå¸¦ç‰ˆæœ¬åç¼€ã€‚</li></ul><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TraitDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;configure k8s Horizontal Pod Autoscaler for Component which using Deployment as worklaod&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hpa</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">appliesToWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workloadRefPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> spec.scaleTargetRef</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        outputs: hpa: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          apiVersion: &quot;autoscaling/v2beta2&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          kind:       &quot;HorizontalPodAutoscaler&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            minReplicas: parameter.min</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            maxReplicas: parameter.max</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            metrics: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">              type: &quot;Resource&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">              resource: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                name: &quot;cpu&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                target: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                  type:               &quot;Utilization&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                  averageUtilization: parameter.cpuUtil</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">              }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          min:     *1 | int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          max:     *10 | int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          cpuUtil: *50 | int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œè¿™ä¸ªè¿ç»´ç‰¹å¾çš„åå­—å« <code>hpa</code>ï¼Œä¸€ç»æ³¨å†Œï¼Œæœ€ç»ˆç”¨æˆ·åœ¨ Application çš„ç»„ä»¶ç±»å‹ï¼ˆ<code>components[*].traits[*].type</code>ï¼‰å­—æ®µå°±å¯ä»¥å¡«å†™è¿™ä¸ªç±»å‹ï¼Œå°†è¿™ä¸ªè¿ç»´ç‰¹å¾ä½œç”¨åœ¨å¯¹åº”çš„ç»„ä»¶ä¸Šã€‚</p><p>ä»å­—æ®µå’Œå‚æ•°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªè¿ç»´ç‰¹å¾çš„åŠŸèƒ½æ˜¯ä¸º Kubernetes Deployment è¿™ç±»å·¥ä½œè´Ÿè½½çš„ç»„ä»¶æä¾›å¼¹æ€§æ‰©ç¼©å®¹çš„èƒ½åŠ›ã€‚è¿™ä¸ªè¿ç»´ç‰¹å¾åªèƒ½ç”¨äº Kubernetes Deploymentï¼ŒåŒæ—¶ KubeVela åœ¨å®ä¾‹åŒ–è¿ç»´èƒ½åŠ›ï¼ˆå³è¿™ä¸ª HPA å¯¹è±¡ï¼‰æ—¶ä¼šä¸º <code>spec.scaleTargetRef</code> å­—æ®µè‡ªåŠ¨æ³¨å…¥å·¥ä½œè´Ÿè½½ï¼ˆDeployment å¯¹è±¡ï¼‰çš„å¼•ç”¨ã€‚æœ€å <code>.spec.schematic.cue.template</code>å­—æ®µæè¿°äº†åŸºäº CUE çš„æŠ½è±¡æ¨¡æ¿ï¼Œå®šä¹‰äº†è¾“å‡ºæ˜¯ä¸€ä¸ª Kubernetes çš„ HorizontalPodAutoscaler ç»“æ„ï¼Œæ¨¡æ¿ä¸­çš„ parameter å®šä¹‰äº†ç”¨æˆ·å¯ä»¥ä½¿ç”¨çš„å‚æ•°ï¼ŒåŒ…æ‹¬æœ€å¤§æœ€å°å€¼å’Œ CPU çš„åˆ©ç”¨ç‡ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åº”ç”¨ç­–ç•¥å®šä¹‰ï¼ˆpolicydefinitionï¼‰"></a>åº”ç”¨ç­–ç•¥å®šä¹‰ï¼ˆPolicyDefinitionï¼‰<a class="hash-link" href="#åº”ç”¨ç­–ç•¥å®šä¹‰ï¼ˆpolicydefinitionï¼‰" title="Direct link to heading">#</a></h2><p>åº”ç”¨ç­–ç•¥å®šä¹‰ä¸è¿ç»´ç‰¹å¾å®šä¹‰ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè¿ç»´ç‰¹å¾ä½œç”¨äºå•ä¸ªç»„ä»¶ï¼Œè€Œåº”ç”¨ç­–ç•¥æ˜¯ä½œç”¨äºæ•´ä¸ªåº”ç”¨æ•´ä½“ï¼ˆå¤šä¸ªç»„ä»¶ï¼‰ã€‚å®ƒå¯ä»¥ä¸ºåº”ç”¨æä¾›å…¨å±€çš„ç­–ç•¥å®šä¹‰ï¼Œå¸¸è§çš„åŒ…æ‹¬å…¨å±€å®‰å…¨ç­–ç•¥ï¼ˆå¦‚ RBACæƒé™ã€å®¡è®¡ã€ç§˜é’¥ç®¡ç†ï¼‰ã€åº”ç”¨æ´å¯Ÿï¼ˆå¦‚ åº”ç”¨çš„ SLO ç®¡ç†ç­‰ï¼‰ã€‚</p><p>å…¶æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PolicyDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;åº”ç”¨ç­–ç•¥å®šä¹‰åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;åŠŸèƒ½æè¿°è¯´æ˜</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ç­–ç•¥æè¿°</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;CUE æ ¼å¼æ¨¡æ¿</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç›®å‰åº”ç”¨ç­–ç•¥å®šä¹‰ä»…åŒ…å« CUE æ ¼å¼æ¨¡æ¿ä¸€ä¸ªå­—æ®µï¼ŒåŒ…å«äº†åº”ç”¨ç­–ç•¥è¾“å‡ºçš„å¯¹è±¡ä»¥åŠå¯¹åº”çš„å‚æ•°ï¼Œå…¶ CUE ç¼–å†™çš„æ ¼å¼ä¸ç»„ä»¶å®šä¹‰çš„ CUE æ¨¡æ¿æ ¼å¼ä¸€è‡´ã€‚ä¸€ä¸ªå…·ä½“çš„ä¾‹å­å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PolicyDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">binding</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ä¸ºåº”ç”¨æä¾›å·®å¼‚åŒ–é…ç½®å’Œç¯å¢ƒè°ƒåº¦ç­–ç•¥&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            apiVersion: &quot;core.oam.dev/v1alpha1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            kind:       &quot;EnvBinding&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                engine: parameter.engine</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                appTemplate: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    apiVersion: &quot;core.oam.dev/v1beta1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    kind:       &quot;Application&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    metadata: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        name:      context.appName</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        namespace: context.namespace</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        components: context.components</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                envs: parameter.envs</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">#Env: {</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">patch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">placement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">clusterSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">labels?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">name?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">*&quot;ocm&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">envs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token comment" style="color:rgb(98, 114, 164)">#Env]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸»è¦ä»‹ç»å…¶ä¸­çš„ç­–ç•¥æè¿°éƒ¨åˆ†ï¼ŒåŸºäº CUE æ ¼å¼ï¼Œè¾“å‡ºä¸€ä¸ª <code>EnvBinding</code> å¯¹è±¡ï¼Œå…¶å‚æ•°å°±æ˜¯ engine å’Œ envs ä¸¤ä¸ªï¼Œå…¶ä¸­ envs æ˜¯ä¸€ä¸ªç»“æ„ä½“æ•°ç»„ï¼Œå…·ä½“çš„ç»“æ„ä½“ç±»å‹å’Œå…¶ä¸­çš„å‚æ•°ç”± <code>#Env</code> æŒ‡å®šï¼Œè¿™é‡Œé¢çš„ CUE è¯­æ³•ä¸<a href="/zh/docs/v1.1/platform-engineers/cue/basic">ç»„ä»¶å®šä¹‰çš„ CUE è¯­æ³•</a>ä¸€è‡´ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ï¼ˆworkflowstepdefinitionï¼‰"></a>å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ï¼ˆWorkflowStepDefinitionï¼‰<a class="hash-link" href="#å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ï¼ˆworkflowstepdefinitionï¼‰" title="Direct link to heading">#</a></h2><p>å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ç”¨äºæè¿°ä¸€ç³»åˆ—åœ¨å·¥ä½œæµä¸­å¯ä»¥å£°æ˜çš„æ­¥éª¤èŠ‚ç‚¹ï¼Œå¦‚æ‰§è¡Œèµ„æºçš„éƒ¨ç½²ã€çŠ¶æ€æ£€æŸ¥ã€æ•°æ®è¾“å‡ºã€ä¾èµ–è¾“å…¥ã€å¤–éƒ¨è„šæœ¬è°ƒç”¨ç­‰ä¸€ç³»åˆ—èƒ½åŠ›å‡å¯ä»¥é€šè¿‡å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰æ¥æè¿°ã€‚</p><p>å·¥ä½œæµèŠ‚ç‚¹çš„å­—æ®µç›¸å¯¹ç®€å•ï¼Œé™¤äº†åŸºæœ¬çš„åç§°å’ŒåŠŸèƒ½ä»¥å¤–ï¼Œå…¶ä¸»è¦çš„åŠŸèƒ½éƒ½åœ¨ CUE çš„æ¨¡æ¿ä¸­é…ç½®ã€‚KubeVela åœ¨å·¥ä½œæµæ¨¡æ¿ä¸­å†…ç½®äº†å¤§é‡çš„æ“ä½œï¼Œå…·ä½“å¯ä»¥é€šè¿‡å·¥ä½œæµæ–‡æ¡£å­¦ä¹ å¦‚ä½•ä½¿ç”¨å’Œç¼–å†™ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkflowStepDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;åŠŸèƒ½æè¿°è¯´æ˜</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># èŠ‚ç‚¹æè¿°</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;CUE æ ¼å¼æ¨¡æ¿</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸€ä¸ªå®é™…çš„å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkflowStepDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        import (&quot;vela/op&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">           component: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // load component from application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> op.</span><span class="token comment" style="color:rgb(98, 114, 164)">#Load &amp; {</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // apply workload to kubernetes cluster</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> op.</span><span class="token comment" style="color:rgb(98, 114, 164)">#ApplyComponent &amp; {</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token key atrule">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // wait until workload.status equal &quot;Running&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">wait</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> op.</span><span class="token comment" style="color:rgb(98, 114, 164)">#ConditionalWait &amp; {</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token key atrule">continue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apply.status.phase ==&quot;Running&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¾‹å­ä¸­çš„å·¥ä½œæµä¸»è¦é€šè¿‡å¼•å…¥<code>vela/op</code> è¿™ä¸ªå†…ç½®çš„ KubeVela åŒ…å®Œæˆä¸€ç³»åˆ—åŠ¨ä½œï¼ŒåŒ…æ‹¬æ•°æ®è½½å…¥ã€èµ„æºåˆ›å»ºä»¥åŠçŠ¶æ€æ£€æŸ¥ã€‚æ•´ä½“è¿™ä¸ªå·¥ä½œæµå°±å®Œæˆäº† KubeVela ç»„ä»¶çš„åˆ›å»ºã€å¹¶ä¸”æŸ¥çœ‹ç»„ä»¶çŠ¶æ€æ˜¯å¦åœ¨æ­£å¸¸è¿è¡Œè¿™ä¸€åŠŸèƒ½ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å·¥ä½œè´Ÿè½½å®šä¹‰ï¼ˆworkloaddefinitionï¼‰"></a>å·¥ä½œè´Ÿè½½å®šä¹‰ï¼ˆWorkloadDefinitionï¼‰<a class="hash-link" href="#å·¥ä½œè´Ÿè½½å®šä¹‰ï¼ˆworkloaddefinitionï¼‰" title="Direct link to heading">#</a></h2><p>å·¥ä½œè´Ÿè½½å®šä¹‰ï¼ˆWorkloadDefinitionï¼‰æ˜¯ç»„ä»¶çš„ä¸€ç§ç³»ç»Ÿçº§ç‰¹å¾ï¼Œå®ƒä¸æ˜¯ç”¨æˆ·æ‰€å…³å¿ƒçš„å­—æ®µï¼Œè€Œæ˜¯ä½œä¸ºå…ƒæ•°æ®è¢« OAM ç³»ç»Ÿæœ¬èº«è¿›è¡Œæ£€æŸ¥ã€éªŒè¯å’Œä½¿ç”¨ã€‚</p><p>å…¶æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;å·¥ä½œè´Ÿè½½å®šä¹‰åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;å·¥ä½œè´Ÿè½½å®šä¹‰å¯¹åº”çš„ Kubernetes èµ„æº</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;å·¥ä½œè´Ÿè½½å®šä¹‰å¯¹åº”çš„ Kubernetes èµ„æºç‰ˆæœ¬</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">podSpecPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;å·¥ä½œè´Ÿè½½ä¸­ Pod å­—æ®µçš„è·¯å¾„</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">childResourceKinds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;èµ„æºç»„</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;èµ„æºç±»å‹</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>å…¶ä¸­ <code>.spec.definitionRef.name</code> æè¿°äº† Kubernetes èµ„æºçš„åç§°ï¼Œå…¶æ ¼å¼ä¸ CRDï¼ˆCustom Resource Definitionï¼‰åç§°ä¸€è‡´ï¼Œæ˜¯ <code>&lt;resources&gt;.&lt;api group&gt;</code>ã€‚</li><li><code>.spec.podSpecPath</code> å®šä¹‰äº†åŒ…å« <code>Kubernetes Pod</code> å­—æ®µçš„å·¥ä½œè´Ÿè½½å¯¹åº”çš„ Pod å­—æ®µè·¯å¾„ã€‚</li><li><code>.spec.revisionLabel</code> å®šä¹‰äº†å·¥ä½œè´Ÿè½½çš„ç‰ˆæœ¬åŒ–æ ‡ç­¾</li><li><code>.spec.childResourceKinds</code> å®šä¹‰äº†è¿™ä¸ªèµ„æºä¼šç”Ÿæˆçš„å­èµ„æºã€‚</li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œæœªæ¥éœ€è¦ OAM æ¨¡å‹ä¸­éœ€è¦çš„å¼•å…¥çš„å…¶ä»–çš„é’ˆå¯¹ Kubernetes èµ„æºç±»å‹ç‰¹å¾çš„çº¦å®šï¼Œä¹Ÿä¼šä½œä¸ºå­—æ®µåŠ å…¥åˆ°å·¥ä½œè´Ÿè½½å®šä¹‰ä¸­ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æŠ½è±¡èƒŒåçš„æ ‡å‡†åè®®"></a>æŠ½è±¡èƒŒåçš„æ ‡å‡†åè®®<a class="hash-link" href="#æŠ½è±¡èƒŒåçš„æ ‡å‡†åè®®" title="Direct link to heading">#</a></h2><p>åº”ç”¨ä¸€ç»åˆ›å»ºï¼ŒKubeVela å°±ä¼šä¸ºåˆ›å»ºçš„èµ„æºæ‰“ä¸Šä¸€ç³»åˆ—çš„æ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾åŒ…å«äº†åº”ç”¨çš„ç‰ˆæœ¬ã€åç§°ã€ç±»å‹ç­‰ã€‚é€šè¿‡è¿™äº›æ ‡å‡†åè®®ï¼Œåº”ç”¨çš„ç»„ä»¶å’Œè¿ç»´èƒ½åŠ›ä¹‹é—´å°±å¯ä»¥è¿›è¡Œåä½œã€‚å…·ä½“çš„å…ƒæ•°æ®åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th align="center">æ ‡ç­¾</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center"><code>workload.oam.dev/type=&lt;ç»„ä»¶å®šä¹‰åç§°&gt;</code></td><td align="center">å¯¹åº”äº†ç»„ä»¶å®šä¹‰ï¼ˆ<code>ComponentDefinition</code>ï¼‰çš„åå­—</td></tr><tr><td align="center"><code>trait.oam.dev/type=&lt;è¿ç»´ç‰¹å¾å®šä¹‰åç§°&gt;</code></td><td align="center">å¯¹åº”äº†è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆ<code>TraitDefinition</code>ï¼‰çš„åå­—</td></tr><tr><td align="center"><code>app.oam.dev/name=&lt;åº”ç”¨å®ä¾‹åç§°&gt;</code></td><td align="center">åº”ç”¨å®ä¾‹åŒ–ï¼ˆApplicationï¼‰çš„åç§°</td></tr><tr><td align="center"><code>app.oam.dev/component=&lt;ç»„ä»¶å®ä¾‹åç§°&gt;</code></td><td align="center">ç»„ä»¶å®ä¾‹åŒ–çš„åç§°</td></tr><tr><td align="center"><code>trait.oam.dev/resource=&lt;è¿ç»´ç‰¹å¾ä¸­è¾“å‡ºçš„èµ„æºåç§°&gt;</code></td><td align="center">è¿ç»´ç‰¹å¾ä¸­è¾“å‡º(outputs.\&lt;èµ„æºåç§°&gt;)çš„èµ„æºåç§°</td></tr><tr><td align="center"><code>app.oam.dev/appRevision=&lt;åº”ç”¨å®ä¾‹çš„ç‰ˆæœ¬åç§°&gt;</code></td><td align="center">åº”ç”¨å®ä¾‹çš„ç‰ˆæœ¬åç§°</td></tr></tbody></table><p>è¿™äº›å…ƒæ•°æ®å¯ä»¥å¸®åŠ©åº”ç”¨éƒ¨ç½²ä»¥åçš„è¿ç»´èƒ½åŠ›æ­£å¸¸è¿ä½œï¼Œæ¯”å¦‚ç°åº¦å‘å¸ƒç»„ä»¶åœ¨åº”ç”¨æ›´æ–°æ—¶æ ¹æ®æ ‡ç­¾è¿›è¡Œç°åº¦å‘å¸ƒç­‰ï¼ŒåŒæ—¶è¿™äº›æ ‡ç­¾ä¹Ÿä¿è¯äº† KubeVela è¢«å…¶ä»–ç³»ç»Ÿé›†æˆæ—¶çš„æ­£ç¡®æ€§ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ¨¡å—å®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡"></a>æ¨¡å—å®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡<a class="hash-link" href="#æ¨¡å—å®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡" title="Direct link to heading">#</a></h2><p>æ¨¡å—å®šä¹‰ä¸­å¯ä»¥é€šè¿‡ <code>context</code> å˜é‡è·å¾—ä¸€äº›è¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå…·ä½“çš„åˆ—è¡¨å¦‚ä¸‹ï¼Œå…¶ä¸­ä½œç”¨èŒƒå›´è¡¨ç¤ºè¯¥ Context å˜é‡èƒ½å¤Ÿåœ¨å“ªäº›æ¨¡å—å®šä¹‰ä¸­ä½¿ç”¨ï¼š</p><table><thead><tr><th align="center">Context å˜é‡</th><th align="center">åŠŸèƒ½æè¿°</th><th align="center">ä½œç”¨èŒƒå›´</th></tr></thead><tbody><tr><td align="center"><code>context.appRevision</code></td><td align="center">åº”ç”¨å½“å‰çš„å®ä¾‹å¯¹åº”çš„ç‰ˆæœ¬åç§°</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.appRevisionNum</code></td><td align="center">åº”ç”¨å½“å‰çš„å®ä¾‹å¯¹åº”çš„ç‰ˆæœ¬æ•°å­—</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.appName</code></td><td align="center">åº”ç”¨å½“å‰çš„å®ä¾‹å¯¹åº”çš„åç§°</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.name</code></td><td align="center">åœ¨ç»„ä»¶å®šä¹‰å’Œè¿ç»´ç‰¹å¾å®šä¹‰ä¸­è¡¨ç¤ºçš„æ˜¯ç»„ä»¶åç§°ï¼Œåœ¨åº”ç”¨ç­–ç•¥å®šä¹‰ä¸­è¡¨ç¤ºçš„æ˜¯åº”ç”¨ç­–ç•¥åç§°</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰ã€åº”ç”¨ç­–ç•¥å®šä¹‰</td></tr><tr><td align="center"><code>context.namespace</code></td><td align="center">åº”ç”¨å½“å‰å®ä¾‹æ‰€åœ¨çš„å‘½åç©ºé—´</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.revision</code></td><td align="center">å½“å‰ç»„ä»¶å®ä¾‹çš„ç‰ˆæœ¬åç§°</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.parameter</code></td><td align="center">å½“å‰ç»„ä»¶å®ä¾‹çš„å‚æ•°ï¼Œå¯ä»¥åœ¨è¿ç»´ç‰¹å¾ä¸­è·å¾—ç»„ä»¶çš„å‚æ•°</td><td align="center">è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.output</code></td><td align="center">å½“å‰ç»„ä»¶å®ä¾‹åŒ–åçš„å¯¹è±¡ç»“æ„ä½“</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr><tr><td align="center"><code>context.outputs.&lt;resourceName&gt;</code></td><td align="center">å½“å‰ç»„ä»¶å’Œè¿ç»´ç‰¹å¾å®ä¾‹åŒ–ä»¥åçš„ç»“æ„ä½“</td><td align="center">ç»„ä»¶å®šä¹‰ã€è¿ç»´ç‰¹å¾å®šä¹‰</td></tr></tbody></table><p>åŒæ—¶ï¼Œåœ¨å·¥ä½œæµç³»ç»Ÿå½“ä¸­ï¼Œç”±äº <code>context</code> è¦ä½œç”¨äºåº”ç”¨çº§ï¼Œä¸ä¸Šè¿°ç”¨æ³•æœ‰å¾ˆå¤§ä¸åŒã€‚æˆ‘ä»¬å•ç‹¬å¯¹å…¶è¿›è¡Œä»‹ç»ï¼š</p><table><thead><tr><th align="center">Context å˜é‡</th><th align="center">åŠŸèƒ½æè¿°</th><th align="center">ä½œç”¨èŒƒå›´</th></tr></thead><tbody><tr><td align="center"><code>context.name</code></td><td align="center">åº”ç”¨å½“å‰å®ä¾‹å¯¹åº”çš„åç§°</td><td align="center">å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰</td></tr><tr><td align="center"><code>context.namespace</code></td><td align="center">åº”ç”¨å½“å‰å®ä¾‹æ‰€åœ¨çš„å‘½åç©ºé—´</td><td align="center">å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰</td></tr><tr><td align="center"><code>context.labels</code></td><td align="center">åº”ç”¨å½“å‰å®ä¾‹çš„æ ‡ç­¾</td><td align="center">å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰</td></tr><tr><td align="center"><code>context.annotations</code></td><td align="center">åº”ç”¨å½“å‰å®ä¾‹çš„æ³¨é‡Š</td><td align="center">å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰</td></tr></tbody></table><p>æœ€åè¯·æ³¨æ„ï¼Œåœ¨æœ¬èŠ‚ä»‹ç»çš„æ‰€æœ‰çš„æ¨¡å—åŒ–å®šä¹‰æ¦‚å¿µï¼Œéƒ½åªéœ€è¦å¹³å°çš„ç®¡ç†å‘˜åœ¨å¸Œæœ›å¯¹ KubeVela è¿›è¡ŒåŠŸèƒ½æ‰©å±•æ—¶äº†è§£ï¼Œæœ€ç»ˆç”¨æˆ·å¯¹è¿™äº›æ¦‚å¿µä¸éœ€è¦æœ‰ä»»ä½•æ„ŸçŸ¥ã€‚</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oam-dev/kubevela.io/edit/main/docs/platform-engineers/oam/x-definition.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æœ¬é¡µ</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-10-16T06:46:30.000Z" class="lastUpdatedDate_1WI_">2021/10/16</time> by <strong>Lei Zhang (Harry)</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/docs/v1.1/platform-engineers/oam/oam-model"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">Â« æ¨¡å‹ç®€ä»‹</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/docs/v1.1/platform-engineers/cue/basic"><div class="pagination-nav__sublabel">ä¸‹ä¸€ç¯‡</div><div class="pagination-nav__label">åŸºç¡€å…¥é—¨ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç»„ä»¶å®šä¹‰ï¼ˆcomponentdefinitionï¼‰" class="table-of-contents__link">ç»„ä»¶å®šä¹‰ï¼ˆComponentDefinitionï¼‰</a><ul><li><a href="#ç»„ä»¶å®šä¹‰æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ" class="table-of-contents__link">ç»„ä»¶å®šä¹‰æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ</a></li></ul></li><li><a href="#è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆtraitdefinitionï¼‰" class="table-of-contents__link">è¿ç»´ç‰¹å¾å®šä¹‰ï¼ˆTraitDefinitionï¼‰</a></li><li><a href="#åº”ç”¨ç­–ç•¥å®šä¹‰ï¼ˆpolicydefinitionï¼‰" class="table-of-contents__link">åº”ç”¨ç­–ç•¥å®šä¹‰ï¼ˆPolicyDefinitionï¼‰</a></li><li><a href="#å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ï¼ˆworkflowstepdefinitionï¼‰" class="table-of-contents__link">å·¥ä½œæµèŠ‚ç‚¹å®šä¹‰ï¼ˆWorkflowStepDefinitionï¼‰</a></li><li><a href="#å·¥ä½œè´Ÿè½½å®šä¹‰ï¼ˆworkloaddefinitionï¼‰" class="table-of-contents__link">å·¥ä½œè´Ÿè½½å®šä¹‰ï¼ˆWorkloadDefinitionï¼‰</a></li><li><a href="#æŠ½è±¡èƒŒåçš„æ ‡å‡†åè®®" class="table-of-contents__link">æŠ½è±¡èƒŒåçš„æ ‡å‡†åè®®</a></li><li><a href="#æ¨¡å—å®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡" class="table-of-contents__link">æ¨¡å—å®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">æ–‡æ¡£</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/end-user/quick-start-cli">å¿«é€Ÿå¼€å§‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/tutorials/webservice">å®è·µæ•™ç¨‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/platform-engineers/oam/oam-model">è‡ªå®šä¹‰æ‰©å±•</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/v1.1/platform-engineers/oam/">é’‰é’‰ (23310022)</a></li><li class="footer__item"><div class="wechat"> <a class="wechat-label">Wechat Group(Scan code to request joining)</a> <a class="wechat-img" rel="noreferrer noopener" aria-label="Wechat Group"><img src="https://static.kubevela.net/images/barnett-wechat.jpg" alt="Broker wechat to add you into the user group."></a></div></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog">åšå®¢</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2021 | Documentation Distributed under <a herf="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
      </div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.312f92b6.js"></script>
<script src="/zh/assets/js/main.aa5d7873.js"></script>
</body>
</html>