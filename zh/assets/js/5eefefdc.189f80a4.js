(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[52889],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,b=u["".concat(l,".").concat(m)]||u[m]||p[m]||o;return n?a.createElement(b,i(i({ref:t},d),{},{components:n})):a.createElement(b,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},91552:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return l},default:function(){return d}});var a=n(22122),r=n(19756),o=(n(67294),n(3905)),i={title:"Provision an RDS instance with more than one database"},s={unversionedId:"end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database",id:"version-v1.2/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database",isDocsHomePage:!1,title:"Provision an RDS instance with more than one database",description:"In the guide Provision and Binding Cloud Resources and Provision a Database and Import a SQL File for initialization,",source:"@site/versioned_docs/version-v1.2/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database.md",sourceDirName:"end-user/components/cloud-services",slug:"/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database",permalink:"/zh/docs/v1.2/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database",editUrl:"https://github.com/oam-dev/kubevela.io/edit/main/docs/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database.md",version:"v1.2",lastUpdatedBy:"Zheng Xi Zhou",lastUpdatedAt:1646882861,formattedLastUpdatedAt:"2022/3/10",frontMatter:{title:"Provision an RDS instance with more than one database"},sidebar:"version-v1.2/docs",previous:{title:"\u5b89\u5168\u8bbf\u95ee\u6570\u636e\u5e93",permalink:"/zh/docs/v1.2/end-user/components/cloud-services/secure-your-database-connection"},next:{title:"\u7070\u5ea6\u53d1\u5e03\u548c\u6269\u7f29\u5bb9",permalink:"/zh/docs/v1.2/end-user/traits/rollout"}},l=[],c={toc:l};function d(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In the guide ",(0,o.kt)("a",{parentName:"p",href:"./provision-and-consume-cloud-services"},"Provision and Binding Cloud Resources")," and ",(0,o.kt)("a",{parentName:"p",href:"./provision-and-initiate-database"},"Provision a Database and Import a SQL File for initialization"),",\nonly one database will be created in an RDS instance. This tutorial will show you how to create more than one database in an RDS instance."),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"./terraform/alibaba-rds"},"reference doc for Alibaba Cloud RDS"),", set ",(0,o.kt)("inlineCode",{parentName:"p"},"database_name")," if you want to create one database.\nIf you want to create more than one database, set ",(0,o.kt)("inlineCode",{parentName:"p"},"databases")," to array of databases. Each database is a map, the map\ncontains the following attributes: name, character_set, description."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    {\n      "name" : "test",\n      "character_set" : "utf8",\n      "description" : "test database"\n    },\n    {\n      "name" : "test2",\n      "character_set" : "utf8",\n      "description" : "test database"\n    }\n  ]\n')),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:null},"Required"),(0,o.kt)("th",{parentName:"tr",align:null},"Default"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"database_name"),(0,o.kt)("td",{parentName:"tr",align:null},"Database name"),(0,o.kt)("td",{parentName:"tr",align:null},"string"),(0,o.kt)("td",{parentName:"tr",align:null},"false"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"databases"),(0,o.kt)("td",{parentName:"tr",align:null},"The database list, each database is a map, the map contains the following attributes: name, character_set, description, like ",(0,o.kt)("inlineCode",{parentName:"td"},'[{"name":"test","character_set":"utf8","description":"test database"},]'),". It conflicts with ",(0,o.kt)("inlineCode",{parentName:"td"},"database_name"),"."),(0,o.kt)("td",{parentName:"tr",align:null},"list(map(string))"),(0,o.kt)("td",{parentName:"tr",align:null},"false"),(0,o.kt)("td",{parentName:"tr",align:null})))),(0,o.kt)("p",null,"Applying the following application can create more than one database in an RDS instance."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f This section requires your platform engineers have already enabled ",(0,o.kt)("a",{parentName:"p",href:"../../../reference/addons/terraform"},"cloud resources addon"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: alibaba-rds-multiple-databases\nspec:\n  components:\n    - name: db\n      type: alibaba-rds\n      properties:\n        instance_name: dblinks\n        account_name: oamtest\n        password: U34rfwefwefffaked\n        databases:\n          - name: dev\n            character_set: utf8\n            description: "dev database"\n          - name: prod\n            character_set: utf8\n            description: "prod database"\n        writeConnectionSecretToRef:\n          name: db-conn\n\n')))}d.isMDXComponent=!0}}]);