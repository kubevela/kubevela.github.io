<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KubeVela Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GLR1Y52M7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5GLR1Y52M7",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="KubeVela" href="/opensearch.xml"><title data-react-helmet="true">CUE Advanced | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/docs/next/platform-engineers/cue/advanced"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CUE Advanced | KubeVela"><meta data-react-helmet="true" name="description" content="This section will introduce how to use CUE to deliver KubeVela modules. You can can dynamically expand the platform as user needs change, adapt to growing number of users and scenarios, and meet the iterative demands of the company&#x27;s long-term business development."><meta data-react-helmet="true" property="og:description" content="This section will introduce how to use CUE to deliver KubeVela modules. You can can dynamically expand the platform as user needs change, adapt to growing number of users and scenarios, and meet the iterative demands of the company&#x27;s long-term business development."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/docs/next/platform-engineers/cue/advanced"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/next/platform-engineers/cue/advanced" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/docs/next/platform-engineers/cue/advanced" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/next/platform-engineers/cue/advanced" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1f84ae86.css">
<link rel="preload" href="/assets/js/runtime~main.95f7c22f.js" as="script">
<link rel="preload" href="/assets/js/main.a6060325.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/platform-engineers/cue/advanced">Next</a></li><li><a class="dropdown__link" href="/docs/platform-engineers/cue/advanced">v1.3</a></li><li><a class="dropdown__link" href="/docs/v1.2/platform-engineers/cue/advanced">v1.2</a></li><li><a class="dropdown__link" href="/docs/v1.1/platform-engineers/cue/advanced">v1.1</a></li><li><a class="dropdown__link" href="/docs/v1.0/platform-engineers/cue/advanced">v1.0</a></li></ul></div><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Mirror</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/platform-engineers/cue/advanced" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/next/platform-engineers/cue/advanced" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/platform-engineers/cue/advanced">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/platform-engineers/cue/advanced">v1.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.2/platform-engineers/cue/advanced">v1.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.1/platform-engineers/cue/advanced">v1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.0/platform-engineers/cue/advanced">v1.0</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="menu__link">Mirror</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/next/platform-engineers/cue/advanced" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/docs/next/platform-engineers/cue/advanced" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/install">Installation</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Vela-Core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/quick-start-cli">Deploy First Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-studies/multi-cluster">Multi-Cluster App Delivery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-studies/jenkins-cicd">Jenkins CI Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-studies/gitops">GitOps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-studies/initialize-env">Initialize/Destroy Environment</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/core-concept">Core Concept</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/architecture">Architecture</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">How-to Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deploy Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/components/helm">Deploy Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/components/cue/webservice">Deploy Container as Web Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/components/cue/task">Deploy Container based Task and Cron Task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/components/cue/raw">Deploy Kubernetes Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/components/kustomize">Pull based Component</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/components/more">Needs More Componentï¼Ÿ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Cloud Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/provision-and-consume-cloud-services">Provision and Binding Cloud Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/provision-and-initiate-database">Provision a Database and Import a SQL File for initialization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/secure-your-database-connection">Secure your Database Connection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database">Provision an RDS instance with more than one database</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/ingress">Gateway for Public Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/rollout">Rollout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/service-binding">Binding Configuration and Secrets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/sidecar">Attaching Sidecar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/more">Get More Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/health">Health Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/apply-once">Allow Configuration Drift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/gc">Garbage Collect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/workflow/component-dependency-parameter">Dependency and Data Passing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/workflow/webhook-notification">Notification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/version-control">Revisioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/cli/addon/addon">Install Addon</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">VelaUX</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/quick-start">Deploy First Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/webservice">Deploy Container Image</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/helm">Deploy Helm Chart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/consume-cloud-services">Deploy Cloud Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/k8s-object">Deploy Kubernetes Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/jenkins">Working with Jenkins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/trigger">Continuous Delivery from Image Registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/workflows">Manage Workflow</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/velaux-concept">VelaUX Concept</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">How-to Guides</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/create-application">Create Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/bind-new-environment">Bind Application with Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/deploy-application">Deploy Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-instance">Check Application State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/tutorials/scaler">Modify Replicas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-log">View Application Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-endpoint">Expose Application for Public Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/view-application-resource">View Resources List Created</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-revision">List Application Revision</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/recycle-environment">Recycle Application Instance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/delete-application">Delete Application</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage workflows</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/workflow/overview">Manage Workflows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage traits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/trait/overview">Manage Traits</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage triggers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/trigger/overview">Integrate with CI system by Triggers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage target</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/target/overview">Manage Targets</a></li></ul></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Extension</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Learning OAM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/oam/oam-model">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/oam/x-definition">X-Definition</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Learning CUE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/cue/basic">CUE Basic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/cue/definition-edit">Manage X-Definition</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/platform-engineers/cue/advanced">CUE Advanced</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Custom Addons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/addon/intro">Customize Addon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/addon/terraform">Extend a Terraform Addon</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/components/custom-component">CUE Components</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Cloud Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/addon/terraform">Extend a Terraform Addon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/component-terraform">Extend Cloud Resources</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Traits System</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/customize-trait">How-to</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/patch-trait">Patch Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/status">Status Write Back</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/advanced">Advanced Features</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Workflow System</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/workflow">Designing Workflow Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/cue-actions">Step Operations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/working-mechanism">Working Mechanism</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">System Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">Bootstrap Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/managing-clusters">Managing Clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/observability">Observability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/performance-finetuning">Performance Fine-tuning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/velaql">VelaQL</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/debug/dry-run">Dry Run for Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/x-def-version">Version Control for Definition</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela">CLI Commands</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Built-in Addons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/overview">Built-in Addons</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/velaux">VelaUX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/terraform">Addon Cloud Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/ai">Machine Learning Addon</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/cloud-resources-list">Supported Cloud Resource list</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/references">Built-in Component Type</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/references">Built-in Trait Type</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/references">Built-in Policy Type</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/workflow/built-in-workflow-defs">Built-in Workflow Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/service-account-integration">ServiceAccount Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/ui-schema">UI-Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/user-improvement-plan">User Improvement Plan</a></li><li class="menu__list-item"><a href="https://kubevela.stoplight.io/docs/kubevela/b3A6NDI5NzQxMzM-detail-definition" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">VelaUX API Doc</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/roadmap/README">KubeVela Roadmap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/developers/references/devex/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for KubeVela <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/platform-engineers/cue/advanced">latest version</a></strong> (v1.3).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">CUE Advanced</h1></header><div class="markdown"><p>This section will introduce how to use CUE to deliver KubeVela modules. You can can dynamically expand the platform as user needs change, adapt to growing number of users and scenarios, and meet the iterative demands of the company&#x27;s long-term business development.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="convert-kubernetes-api-objects-into-custom-components"></a>Convert Kubernetes API Objects Into Custom Components<a class="hash-link" href="#convert-kubernetes-api-objects-into-custom-components" title="Direct link to heading">#</a></h2><p>Let&#x27;s take the <a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" target="_blank" rel="noopener noreferrer">Kubernetes StatefulSet</a> as an example to show how to use KubeVela to build custom modules and provide capabilities.</p><p>Save the YAML example of StatefulSet in the official document locally and name it as <code>my-stateful.yaml</code>, then execute commande as below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"> vela def init my-stateful -t component --desc &quot;My StatefulSet component.&quot; --template-yaml ./my-stateful.yaml -o my-stateful.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>View the generated &quot;my-stateful.cue&quot; file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ cat my-stateful.cue</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;my-stateful&quot;: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    annotations: {}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    attributes: workload: definition: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;&lt;change me&gt; apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;&lt;change me&gt; Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    description: &quot;My StatefulSet component.&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    labels: {}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: &quot;component&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;Service&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            ... // omit non-critical info</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    outputs: web: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;StatefulSet&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            ... // omit non-critical info</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    parameter: {}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Modify the generated file as follows:</p><ol><li>The example of the official StatefulSet website is a composite component composed of two objects <code>StatefulSet</code> and <code>Service</code>. According to KubeVela <a href="/docs/next/platform-engineers/components/custom-component#composition">Rules for customize components</a>, in composite components, core workloads such as StatefulSet need to be represented by the <code>template.output</code> field, and other auxiliary objects are represented by <code>template.outputs</code>, so we make some adjustments and all the automatically generated output and outputs are switched.</li><li>Then we fill in the apiVersion and kind data of the core workload into the part marked as <code>&lt;change me&gt;</code></li></ol><p>After modification, you can use <code>vela def vet</code> to do format check and verification.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela def vet my-stateful.cue</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Validation succeed.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The file after two steps of changes is as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ cat my-stateful.cue</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;my-stateful&quot;: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    annotations: {}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    attributes: workload: definition: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;StatefulSet&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    description: &quot;My StatefulSet component.&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    labels: {}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: &quot;component&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;StatefulSet&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        metadata: name: &quot;web&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            selector: matchLabels: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            replicas:    3</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            serviceName: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                metadata: labels: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        name: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        ports: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            name:          &quot;web&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            containerPort: 80</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        image: &quot;k8s.gcr.io/nginx-slim:0.8&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        volumeMounts: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            name:      &quot;www&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            mountPath: &quot;/usr/share/nginx/html&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    terminationGracePeriodSeconds: 10</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            volumeClaimTemplates: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                metadata: name: &quot;www&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    accessModes: [&quot;ReadWriteOnce&quot;]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    resources: requests: storage: &quot;1Gi&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    storageClassName: &quot;my-storage-class&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    outputs: web: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;Service&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        metadata: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            labels: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            clusterIP: &quot;None&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            ports: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                name: &quot;web&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                port: 80</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            selector: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    parameter: {}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Install ComponentDefinition into the Kubernetes cluster:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela def apply my-stateful.cue</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ComponentDefinition my-stateful created in namespace vela-system.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can see that a <code>my-stateful</code> component  via <code>vela components</code> command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela components</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">NAME        NAMESPACE   WORKLOAD                                DESCRIPTION</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">my-stateful vela-system statefulsets.apps                       My StatefulSet component.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">... </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>When you put this customized component into <code>Application</code>, it looks like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cat &lt;&lt;EOF | vela up -f -</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  name: website</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  components:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    - name: my-component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      type: my-stateful</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">EOF</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="define-customized-parameters-for-component"></a>Define Customized Parameters For Component<a class="hash-link" href="#define-customized-parameters-for-component" title="Direct link to heading">#</a></h2><p>In previous section we have defined a ComponentDefinition that has no parameter. In this section we will show how to expose parameters.</p><p>In this example, we expose the following parameters to the user:</p><ul><li>Image name, allowing users to customize the image</li><li>Instance name, allowing users to customize the instance name of the generated StatefulSet object and Service object</li><li>The number of replica, the number of copies of the generated object</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ... # Omit other unmodified fields</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            kind:       &quot;StatefulSet&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            metadata: name: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                selector: matchLabels: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                replicas:    parameter.replicas</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                serviceName: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    metadata: labels: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            ... // Omit other unmodified fields</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    ... // Omit other unmodified fields</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        outputs: web: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            apiVersion: &quot;v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            kind:       &quot;Service&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            metadata: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                name: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                labels: app: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                ... // Omit other unmodified fields </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            replicas: int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>After modification, use <code>vela def apply</code> to install to the cluster:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela def apply my-stateful.cue</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ComponentDefinition my-stateful in namespace vela-system updated.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can see the parameters of my-stateful ComponentDefinition as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela show my-stateful</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Properties</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+----------+-------------+--------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">|   NAME   | DESCRIPTION |  TYPE  | REQUIRED | DEFAULT |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+----------+-------------+--------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| name     |             | string | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| replicas |             | int    | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| image    |             | string | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+----------+-------------+--------+----------+---------+</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Updating the ComponentDefinition will not affect existing Applications. It will take effect only after updating the Applications next time.</p><p>You can specify the three new parameters in the application:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">    apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      name: website</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      components:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        - name: my-component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          type: my-stateful</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: nginx:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            replicas: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name: my-component</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Save the file locally and name it <code>app-stateful.yaml</code>, execute <code>vela up -f app-stateful.yaml</code> to update the application, you can see that the name, image, and number of instances of the StatefulSet object have been updated.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dry-run"></a>Dry-run<a class="hash-link" href="#dry-run" title="Direct link to heading">#</a></h2><p>In order to ensure that the user&#x27;s application can run correctly with the parameters, you can also use the <code>vela dry-run</code> command to verify the trial run of your template.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">vela dry-run -f app-stateful.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>By viewing the output, you can compare whether the generated object is consistent with the object you actually expect. You can even execute this YAML directly into the Kubernetes cluster and use the results of the operation for verification.</p><details><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Application(website) -- Component(my-component)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">---</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app.oam.dev/appRevision: &quot;&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app.oam.dev/component: my-component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app.oam.dev/name: website</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    workload.oam.dev/type: my-stateful</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  name: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: default</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  clusterIP: None</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  ports:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: web</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 80</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  selector:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  template:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      containers:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      - image: saravak/fluentd:elastic</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        name: my-sidecar</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">---</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: apps/v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: StatefulSet</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  labels:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app.oam.dev/appRevision: &quot;&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app.oam.dev/component: my-component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    app.oam.dev/name: website</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    trait.oam.dev/resource: web</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    trait.oam.dev/type: AuxiliaryWorkload</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  name: web</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: default</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  replicas: 3</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  selector:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    matchLabels:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      app: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  serviceName: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  template:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      labels:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        app: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      containers:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      - image: k8s.gcr.io/nginx-slim:0.8</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        name: nginx</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        ports:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        - containerPort: 80</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          name: web</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        volumeMounts:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        - mountPath: /usr/share/nginx/html</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          name: www</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      terminationGracePeriodSeconds: 10</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  volumeClaimTemplates:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  - metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      name: www</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      accessModes:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      - ReadWriteOnce</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      resources:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        requests:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          storage: 1Gi</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      storageClassName: my-storage-class</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></details><p>You can also use <code>vela dry-run -h</code> to view more available function parameters.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-context-to-get-runtime-information"></a>Use <code>context</code> to get runtime information<a class="hash-link" href="#use-context-to-get-runtime-information" title="Direct link to heading">#</a></h2><p>In our Application example above, the name field in the properties and the name field of the Component are the same. So we can use the <code>context</code> keyword that carries context information in the template, where <code>context.name</code> is the runtime component Name, thus the name parameter in <code>parameter</code> is no longer needed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">... # Omit other unmodified fields</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        kind:       &quot;StatefulSet&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        metadata: name: context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            ... // çœç•¥å…¶ä»–æ²¡æœ‰ä¿®æ”¹çš„å­—æ®µ</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        replicas: int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>KubeVela has built-in application <a href="/docs/next/platform-engineers/oam/x-definition#x-definition-runtime-context">required context</a>, you can configure it according to your needs.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="add-traits-on-demand"></a>Add Traits On Demand<a class="hash-link" href="#add-traits-on-demand" title="Direct link to heading">#</a></h2><p>In addition to modifying ComponentDefinitions and adding parameters, you can also use the TraitDefinition to patch configurations to Components.  KubeVela has built-in operations to meet the following needs: adding labels, annotations, injecting environment variables, sidecars, adding volumes, and so on.  You can also <a href="/docs/next/platform-engineers/traits/patch-trait">customize Trait</a> to do more flexible patching.</p><p>You can use <code>vela traits</code> to view, the traits marked with <code>*</code> are general traits, which can operate on common Kubernetes resource objects.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela traits</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                        NAMESPACE   APPLIES-TO          CONFLICTS-WITH  POD-DISRUPTIVE  DESCRIPTION</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">annotations                 vela-system *                                   true            Add annotations on K8s pod for your workload which follows</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            the pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">configmap                   vela-system *                                   true            Create/Attach configmaps on K8s pod for your workload which</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            follows the pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">env                         vela-system *                                   false           add env on K8s pod for your workload which follows the pod</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            spec in path &#x27;spec.template.&#x27;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">hostalias                   vela-system *                                   false           Add host aliases on K8s pod for your workload which follows</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            the pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">labels                      vela-system *                                   true            Add labels on K8s pod for your workload which follows the</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">lifecycle                   vela-system *                                   true            Add lifecycle hooks for the first container of K8s pod for</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            your workload which follows the pod spec in path</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">node-affinity               vela-system *                                   true            affinity specify node affinity and toleration on K8s pod for</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            your workload which follows the pod spec in path</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">scaler                      vela-system *                                   false           Manually scale K8s pod for your workload which follows the</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">sidecar                     vela-system *                                   true            Inject a sidecar container to K8s pod for your workload</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            which follows the pod spec in path &#x27;spec.template&#x27;.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Taking sidecar as an example, you can check the usage of sidecar:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela show sidecar</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Properties</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+---------+-----------------------------------------+-----------------------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">|  NAME   |               DESCRIPTION               |         TYPE          | REQUIRED | DEFAULT |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+---------+-----------------------------------------+-----------------------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| name    | Specify the name of sidecar container   | string                | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| cmd     | Specify the commands run in the sidecar | []string              | false    |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| image   | Specify the image of sidecar container  | string                | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| volumes | Specify the shared volume path          | [[]volumes](#volumes) | false    |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+---------+-----------------------------------------+-----------------------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">## volumes</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+------+-------------+--------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| NAME | DESCRIPTION |  TYPE  | REQUIRED | DEFAULT |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+------+-------------+--------+----------+---------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| path |             | string | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">| name |             | string | true     |         |</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+------+-------------+--------+----------+---------+</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Use the sidecar directly to inject a container, the application description is as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  name: website</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  components:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    - name: my-component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      type: my-stateful</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        image: nginx:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        replicas: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        name: my-component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      traits:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      - type: sidecar</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          name: my-sidecar</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          image: saravak/fluentd:elastic</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Deploy and run the application, and you can see that a fluentd sidecar has been deployed and running in the StatefulSet.</p><p>You can also use <code>vela def</code> to get the CUE source file of the sidecar to modify, add parameters, etc.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">vela def get sidecar</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The customization of operation and maintenance capabilities is similar to component customization, so we wonâ€™t go into details here. You can read <a href="/docs/next/platform-engineers/traits/customize-trait">Customize Trait</a> for more detailed functions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="summarize"></a>Summarize<a class="hash-link" href="#summarize" title="Direct link to heading">#</a></h2><p>This section introduces how to deliver complete modular capabilities through CUE. The core is that it can dynamically increase configuration capabilities according to user needs, and gradually expose more functions and usages, so as to reduce the overall learning threshold for users and ultimately improve R&amp;D efficient.
The out-of-the-box capabilities provided by KubeVela, including components, traits, policy, and workflow, are also designed as pluggable and modifiable capabilities.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="next"></a>Next<a class="hash-link" href="#next" title="Direct link to heading">#</a></h2><p>Get to know about how to customize:</p><ul><li><a href="/docs/next/platform-engineers/components/custom-component">Component</a></li><li><a href="/docs/next/platform-engineers/traits/customize-trait">Trait</a></li><li><a href="/docs/next/platform-engineers/workflow/workflow">Workflow</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oam-dev/kubevela.io/edit/main/docs/platform-engineers/cue/advanced.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-01-12T13:27:19.000Z" class="lastUpdatedDate_1WI_">1/12/2022</time> by <strong>Jianbo Sun</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/platform-engineers/cue/definition-edit"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Manage X-Definition</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/platform-engineers/addon/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customize Addon Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#convert-kubernetes-api-objects-into-custom-components" class="table-of-contents__link">Convert Kubernetes API Objects Into Custom Components</a></li><li><a href="#define-customized-parameters-for-component" class="table-of-contents__link">Define Customized Parameters For Component</a></li><li><a href="#dry-run" class="table-of-contents__link">Dry-run</a></li><li><a href="#use-context-to-get-runtime-information" class="table-of-contents__link">Use <code>context</code> to get runtime information</a></li><li><a href="#add-traits-on-demand" class="table-of-contents__link">Add Traits On Demand</a></li><li><a href="#summarize" class="table-of-contents__link">Summarize</a></li><li><a href="#next" class="table-of-contents__link">Next</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/end-user/quick-start-cli">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/webservice">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/platform-engineers/oam/oam-model">Extension</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/platform-engineers/cue/">DingTalk (23310022)</a></li><li class="footer__item"><div class="wechat"> <a class="wechat-label">Wechat Group(Scan code to request joining)</a> <a class="wechat-img" rel="noreferrer noopener" aria-label="Wechat Group"><img src="https://static.kubevela.net/images/barnett-wechat.jpg" alt="Broker wechat to add you into the user group."></a></div></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2022 | Documentation Distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
        <br>
        Â© 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page. <a href="https://beian.miit.gov.cn/" target="_blank">æµ™ICPå¤‡12022327å·</a>
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.95f7c22f.js"></script>
<script src="/assets/js/main.a6060325.js"></script>
</body>
</html>