---
title: Install Kubernetes and KubeVela on Remote Server
---


import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

This documents show you how to install KubeVela on a remote server (Like aws EC2 or aliyun ECS) in all-in-one mode.

## 1. Prepare a machine

You can install KubeVela on Linux, macOS or Windows. Usually we use a Linux as remote server and this document will use
Linux as example.


**Requirements**

1. Make sure your machine have `curl` installed.
2. This server have a public IP, or in the corporate intranet you can access the server's IP. Hereinafter, it is collectively referred to as having a public network IP.
3. If you are using a cloud server, make sure you have opened the port 6443 in secure group.

:::note
It's OK to continue installation if the server doesn't have a public IP. In this case, You can only log in to the server via ssh to access KubeVela.
And you can't access VelaUX.
:::

## 2. Install VelaD and Setup KubeVela

[VelaD](https://github.com/kubevela/velad) packages KubeVela with all dependencies that enables you to run KubeVela on any of docker compatible environments or linux system.

- VelaD provides Kubernetes by leveraging [K3s](https://rancher.com/docs/k3s/latest/en/quick-start/) on linux or [k3d](https://k3d.io/) on docker environment.
- KubeVela along with all related images, and `vela` command line are packaged together that enables air-gapped installation.

### Download VelaD

It will download and place the binary in your system `PATH`,
so you may be required for root privilege during the installation process.
If you don't need the automation with root access, you can download from the [release page](https://github.com/kubevela/velad/releases) and uncompress manually.

```shell
curl -fsSl https://static.kubevela.net/script/install-velad.sh | bash
```

Check `velad` installed in `/usr/local/bin/`


### Setup KubeVela

<Tabs groupId="public-ip">
  <TabItem value="with" label="With Public IP">

  ```shell
  velad install --bind-ip=SERVER-PUBLIC-IP
  ```

  </TabItem>
  <TabItem value="without" label="Without Public IP">

  ```shell
  velad install
  ```

  </TabItem>

</Tabs>

<details>
  <summary>expected output</summary>

  ```
  Preparing K3s images...
  Successfully prepare k3s image: /Users/sunjianbo/.vela/velad/k3s/k3s-airgap-images-amd64.tgz
  Successfully prepare k3d images

  ...snip...

  KubeVela control plane has been successfully set up on your cluster.
  If you want to enable dashboard, please run "vela addon enable /Users/sunjianbo/.vela/addons/velaux"

  Keep the token below if you want to restart the control plane
  K1075e7f6c77555e6ebdaf4854e4a2f39ae4287cfad23f27cdac5b33608d44633fe::server:zSpzbdbGzVxOwfBvvjgT

  ðŸš€ Successfully install KubeVela control plane
  ðŸ”­ See available commands with `vela help`
  ðŸ”‘ To access the cluster, set KUBECONFIG:
  export KUBECONFIG=$(velad kubeconfig --name default --host)
  ```

</details>

### Verify Installation

Export kubeconfig and list all built-in ComponentDefinition:

```shell
export KUBECONFIG=$(velad kubeconfig --host)
vela comp
```

:::tip
- When executing `velad install`, vela CLI (`vela`) is already installed and add to `PATH` automatically. So you can use it directly.
Later we will access KubeVela in local machine, we will install vela CLI in local machine again.
- A file uesd to configure access to clusters is called *kubeconfig file*. Vela CLI also use this file to access KubeVela.
:::

<details>
  <summary>expected output</summary>

  ```
  NAME DEFINITION DESCRIPTION
  daemon daemonsets.apps Describes daemonset services in Kubernetes.
  webservice deployments.apps Describes long-running, scalable, containerized services
  that have a stable network endpoint to receive external
  network traffic from customers.
  worker deployments.apps Describes long-running, scalable, containerized services
  that running at backend. They do NOT have network endpoint
  to receive external network traffic.
  config-image-registry autodetects.core.oam.dev Config information to authenticate image registry
  k8s-objects autodetects.core.oam.dev K8s-objects allow users to specify raw K8s objects in
  properties
  task jobs.batch Describes jobs that run code or a script to completion.
  ref-objects autodetects.core.oam.dev Ref-objects allow users to specify ref objects to use.
  Notice that this component type have special handle logic.
  raw autodetects.core.oam.dev Raw allow users to specify raw K8s object in properties.
  This definition is DEPRECATED, please use 'k8s-objects'
  instead.
  cron-task cronjobs.batch Describes cron jobs that run code or a script to completion.
  ```

</details>

## 3. Install VelaUX

:::note
If server doesn't have a public IP, you can skip this step.
:::

VelaUX is a dashboard for KubeVela. It is a web application that runs in your cluster. You can access it with your browser.

Run this command on remote server.

```shell
vela addon enable ~/.vela/addons/velaux serviceType=NodePort
```

<details>
  <summary>expected output</summary>

  ```
  Addon: velaux enabled Successfully.
  ...
  I0907 12:03:11.462606   98769 utils.go:156] find cluster gateway service vela-system/kubevela-cluster-gateway-service:9443
  Please access addon-velaux from the following endpoints:
  +---------+-----------+-------------------------------+----------------------------+-------+
  | CLUSTER | COMPONENT |   REF(KIND/NAMESPACE/NAME)    |          ENDPOINT          | INNER |
  +---------+-----------+-------------------------------+----------------------------+-------+
  | local   | apiserver | Service/vela-system/apiserver | apiserver.vela-system:8000 | true  |
  | local   | velaux    | Service/vela-system/velaux    | http://47.252.17.47:30000  | false |
  +---------+-----------+-------------------------------+----------------------------+-------+
  ```

</details>

By adding `serviceType=NodePort`, we are telling VelaUX to expose service with K8s
[NodePort](https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport) type.
Check the endpoint of VelaUX with following command:

```shell
vela status addon-velaux -n vela-system --endpoint
```

It will show URL like `http://<PUBLIC-IP>:<PORT> access that URL with your browser.

:::caution open the port
If you are using a cloud server, please open this port in secure group.
:::

> For more VelaUX options, refer to [VelaUX addon](../reference/addons/velaux) document for other advanced installation arguments.

VelaUX needs authentication. The default username is `admin` and the password is **`VelaUX12345`**.

It requires you to override with a new password for the first login, please make sure to remember the new password.

## 4. Access cluster From Local (Optional)

:::note
If the server doesn't have a public IP, skip this step.
:::

If the server have a public IP, you can access KubeVela with your local machine. Make sure you add `--bind-ip` when executing `velad install` command in the last step on the server.

### Copy KubeConfig

Following command will print the kubeconfig for your cluster. `--external` means printed kubeconfig can be used from other
machine (like your local machine).

```shell
cat $(velad kubeconfig --external)
```

Then you need to copy this kubeconfig to your local machine. Let's say you saving a file in `~/.kube/velad-config` in your local machine.

### Install Vela CLI in Local

To access the cluster, you also need to install `vela` CLI in your local machine.

```shell
curl -fsSl https://static.kubevela.net/script/install.sh | bash
```

### Access KubeVela

Export KUBECONFIG environment variable and list all built-in ComponentDefinition:

```shell
export KUBECONFIG=~/.kube/velad-config
vela comp
```

## 5. Cleanup

Run following command on remote-server.

This command will clean up KubeVela controllers along with the Kubernetes cluster, refer to [the advanced guide](../platform-engineers/advanced-install#uninstall) for more detailed steps.

```
velad uninstall
```

